var a=void 0,f=null;function aa(b){return function(c){this[b]=c}}function k(b){return function(){return this[b]}}var ba=100,ca=5;function da(b,c,d,e,g,h){this.A=b;this.t=c;this.Sa=d||[];this.ca=e||ca;this.cc=g||ba;this.he=this.me=!1;this.ob=h||function(){}}da.prototype.getName=k("A");function ea(b,c){b.ob=c}function fa(b,c,d,e){this.Yb=b;this.Pc=this.s=c;this.Vc=1;this.e=d;this.f=e;this.ie=-1}ga.prototype=new fa;
function ga(b,c,d,e,g){this.Yb=b;this.s=c;this.e=d;this.f=e;this.Vc=1;this.ui=g;this.ie=-1}
function ha(b,c,d){this.m=Math.floor(Math.random()*Math.pow(10,10));this.Ca=b;this.t=b.t;this.s=0;this.e=c;this.f=d;this.cg=[];this.ba=[];this.wa=[];this.mb=!0;this.Ma=[];this.pe=[];this.kg=[];this.jg=[];this.Da=this.cb=f;ia(this,a);this.Hb=this.Gb=this.Cb=0;this.ca=ca;this.nb=0;this.cc=ba;this.va={};ja(this);this.dc=!1;this.Ti=0;this.Ji=this.Ii=this.Di=f;this.children=[];this.lj=[];this.Gi=[];this.Ki=[];this.Ei=[];this.L=[];this.hf=function(b,c){var d=b+c;return d>0&&d<ba?d:d>0?ba:0};this.uf=function(){for(var b=
0,c=this.Ca.Sa.length,d=!1,i=0;i<c;i++){var j=this.va[this.Ca.Sa[i].j];j==0&&(d=!0);b+=j}this.cc=d?0:b/c};this.Ui=k("m")}ha.prototype.xc=function(){return[this.e,this.f]};ha.prototype.moveTo=function(b,c){this.e=b;this.f=c;this.s++};ha.prototype.lastPosition=k("cb");ha.prototype.D=k("Ca");function ja(b){for(var c=0;c<b.Ca.Sa.length;c++)b.va[b.Ca.Sa[c].j]=ba;b.va.length=b.Ca.Sa.length}function ka(b,c){for(var d=b.Ca.Sa.length,e=0;e<d;e++){var g=b.Ca.Sa[e];b.va[g.j]=b.hf(b.va[g.j],c)}b.uf()}
function la(b,c,d){d=d.j;b.va[d]=b.hf(b.va[d],c);b.uf()}function ma(b){var c=b.Gb,d=b.Hb,e=m.i/2-m.kb/2,g=Math.floor(Math.random()*3-1);c+=Math.floor(Math.random()*3-1);d+=g;if(e-Math.abs(c)>=0)b.Gb=c;if(e-Math.abs(d)>=0)b.Hb=d}
function na(b){var c=b.ca,c=b.ca-ca,d=0;switch(1){case 0:d=Math.pow(Math.abs(c),Math.abs(c))+2;break;case 1:d=Math.pow(Math.abs(c)+1,2)+2;break;case 2:d=Math.abs(c)+2;break;case 3:d=3}var d=Math.floor(Math.random()*d)-1,e=Math.pow(Math.abs(c),0.5)+0.5|0,e=e==0?1:e,d=d<0?-e:d>0?e:0,c=b.ca+(c>0?-d:d)*1;if(c>0)b.ca=c}
function ia(b,c){var d=b.e,e=b.f,g=f;if(b.ba[[d,e]]!=a){var h=g=b.ba[[d,e]],i=b.s;h.Yb=b.m;h.Pc=i;h.Vc++}else g=new fa(b.m,b.s,d,e),b.ba[[d,e]]=g;b.wa[[d,e]]!=a&&delete b.wa[[d,e]];if(b.Da!=a)g.ie=b.s-b.Da.s;b.cb=g;b.cg[b.s]=g;if(c!=a){h=c.k;for(g=0;g<h.length;g++)i=h[g],Math.abs(i.e-d)*Math.abs(i.f-e)<=1&&(b.kg[[d,e]]=i);if(d-1>=0&&c.n[e*c.l+(d-1)]==a&&b.ba[[d-1,e]]==a)b.Da=new fa(b.m,b.s,d-1,e),b.wa[[d-1,e]]=b.Da;if(d+1<c.l&&c.n[e*c.l+(d+1)]==a&&b.ba[[d+1,e]]==a)b.Da=new fa(b.m,b.s,d+1,e),b.wa[[d+
1,e]]=b.Da;if(e-1>=0&&c.n[(e-1)*c.l+d]==a&&b.ba[[d,e-1]]==a)b.Da=new fa(b.m,b.s,d,e-1),b.wa[[d,e-1]]=b.Da;if(e+1<c.B&&c.n[(e+1)*c.l+d]==a&&b.ba[[d,e+1]]==a)b.Da=new fa(b.m,b.s,d,e+1),b.wa[[d,e+1]]=b.Da;if(b.mb){h=c.ua;for(i=0;i<h.length;i++){var j=h[i];if(j.m!=b.m){var l=j.e,n=j.f;if((j.lastPosition().e!=b.lastPosition().e||j.lastPosition().f!=b.lastPosition().f)&&Math.abs(l-d)<=1&&Math.abs(n-e)<=1){b.jg[j.m]=new ga(b.m,b.s,d,e,j.m);n=[];for(g in j.ba)l=j.ba[g],l!=a&&(n[[l.e,l.f]]=new fa(l.Yb,l.s,
l.e,l.f));b.Ma[j.m]=n;n=[];for(g in j.wa)l=j.wa[g],l!=a&&(n[[l.e,l.f]]=new fa(l.Yb,l.s,l.e,l.f));b.pe[j.m]=n}}}}}}
function pa(b,c){var d=m.a;a:{for(var e=c?c.withNoRepeat:!1,g=d.Zb,h=b.xc()[0],i=b.xc()[1],j=h,l=i,n=b.lastPosition().e,r=b.lastPosition().f,t=[],v=[],p=[0,1,2,3],j=p.length,l=0;l<j;l++){var z=Math.floor(Math.random()*p.length);v.push(p[z]);p.splice(z,1)}for(p=0;p<v.length;p++){var j=h,l=i,z=d.l-1,s=d.B-1,w=!1;switch(v[p]){case 0:h==0?g?j=z:w=!0:j-=1;break;case 1:h==z?g?j=0:w=!0:j+=1;break;case 2:i==0?g?l=s:w=!0:l-=1;break;case 3:i==s?g?l=0:w=!0:l+=1}e&&n==j&&r==l||w||d.ta[[j,l]]==a&&t.push([j,l])}if(t.length==
0)d=[n,r];else{g=[];for(p=0;p<t.length;p++){e=t[p];if(qa(d,e[0],e[1])){d=e;break a}if(b.ba[e]==a){v=!1;if(b.mb)for(var x in b.Ma)l=b.Ma[x],l[e]!=a&&(v=!0);v||g.push(e)}}if(g.length>0){n=g[0];for(p=0;p<g.length;p++)if(e=g[p],ra(d,e[0],e[1])!=f){n=e;break}d=n}else if((h!=n||i!=r)&&t.push([n,r]),t.length>1){var r=-1,n=f,g=-1,v=f,j=[],u;for(u in b.ba)j[u]=b.ba[u];if(b.mb)for(u in b.Ma)for(i in h=b.Ma[u],h)j[i]=h[i];for(p=0;p<t.length;p++){e=t[p];h=b.ba[e];u=i=-1;s=0;if(h!=a){var z=h.Pc,y;for(y in b.wa){var F=
b.wa[y];if(F!=a){w=!1;if(b.mb)for(x in b.Ma)if(l=b.Ma[x],l[y]!=a){w=!0;break}l=F.s;l=Math.abs(z-l);if(u==-1||l<u)u=l;if(!w&&(i==-1||l<i))i=l}s++}}if(b.mb)for(x in b.Ma)if(l=b.Ma[x],s=b.pe[x],s!=a&&l!=a&&l[e]!=a)for(y in w=l[e].s,s)if(l=s[y],j[y]==a&&(l=l.s,l=Math.abs(w-l),i==-1||l<i)){if(h!=a&&(z=h.Pc,F=h.Vc,z>w&&F>3))continue;i=l}if(u>-1&&(g==-1||u<g))g=u,v=e;if(i>-1&&(r==-1||i<r))r=i,n=e}if(n==a)for(p=0;p<t.length;p++)if(e=t[p],b.wa[e]!=a){n=e;break}n==a&&v!=a&&(n=v);if(n==a)for(x=0;x<t.length;x++)if(y=
t[x],ra(d,y[0],y[1])!=f){n=y;break}n==a&&(n=t[0]);d=n}else d=t[0]}}b.moveTo(d[0],d[1])}function ra(b,c,d){for(var b=b.k,e=0,g=b.length;e<g;e++){var h=b[e],i=h.f;if(Math.abs(h.e-c)<=1&&Math.abs(i-d)<=1)return h}return f};function ya(b,c,d,e,g){this.Db=b;this.za=c||0;this.La=d||150;this.eg=e||0.5;this.Rc=g||new o("A catastrophe is taking place!",a,a,this.za,this.La);this.Sc=!1}ya.prototype.strike=function(){if(!this.Sc){for(var b=m.a.k,c=m.sd,d=[],e=0,g=b.length;e<g;e++){var h=b[e];Math.random()<Math.pow(this.eg,Math.pow(1,c-1))?d.push(h):m.ye(h)}b=m.a;b.k=d;b.Ta=za(b);this.Sc=!0}};function q(b){this.m=b;this.K=!1;this.A=b;this.ja=[];this.Z=[];this.B=this.l=10;this.G=1;this.u=10;this.J=20;this.ka=100;this.Qc=this.lg=this.si=this.$b=this.Zb=!1;this.n=[];this.wi=[];this.ne=[];this.Wc=[];this.ua=[];this.dg={};this.ec=[];this.k=[];this.Ta=za(this);this.ta={};this.R=f;this.H="Welcome to level "+this.m+".";this.Y="Congratulations! You have completed level "+this.m+".";this.la=this.aa=this.$=this.oe=this.z=this.Ka=f}q.prototype.getName=k("A");q.prototype.Q=aa("A");q.prototype.qa=aa("$");
function Aa(b){var c=m.a;if(c.n[b.f*c.l+b.e]!=f)throw Error("Tile is already occupied!");c.n[b.f*c.l+b.e]=b;Ba(c,b.e,b.f);Ca(c,b.e,b.f);c.ta[[b.e,b.f]]=b}function Da(b,c){var d=m.a;d.n[c*d.l+b]=a;d.ta[[b,c]]=a}function A(b){b.n=[];for(var c=0;c<b.B;c++)for(var d=0;d<b.l;d++){var e=new Ea(Fa,d,c);b.n.push(e);b.ta[[e.e,e.f]]=e}}function B(b,c,d){for(var e=c;e<c+d;e++)if(e>=0&&e<b.n.length){var g=b.n[e];b.n[e]=a;b.ta[[g.e,g.f]]=a}}
function Ga(b){b.ta=[];for(var c=0;c<b.n.length;c++){var d=b.n[c];d!=a&&(b.ta[[d.e,d.f]]=d)}}function C(b,c,d){var e;a:{for(e in b.ja){var g=b.ja[e];if(g[0]==c&&g[1]==d){e=!0;break a}}for(e in b.Z)if(g=b.Z[e],g[0]==c&&g[1]==d){e=!0;break a}e=!1}e||b.ja.push([c,d])}function Ba(b,c,d){for(var e=-1,g=0;g<b.ja.length;g++){var h=b.ja[g];h[0]==c&&h[1]==d&&(e=g)}e>-1&&b.ja.splice(e,1)}function qa(b,c,d){for(var e=0;e<b.Z.length;e++){var g=b.Z[e];if(g[0]==c&&g[1]==d)return!0}return!1}
function D(b,c,d){for(var e=!1,g=0;g<b.Z.length;g++){var h=b.Z[g];if(h[0]==c&&h[1]==d){e=!0;break}}e||b.Z.push([c,d])}function Ca(b,c,d){for(var e=-1,g=0;g<b.Z.length;g++){var h=b.Z[g];h[0]==c&&h[1]==d&&(e=g)}e>-1&&b.Z.splice(e,1)}function Ia(b,c){b.ua=c;for(var d in b.ua){var e=b.ua[d];b.dg[e.m]=e}}function Ja(b,c){for(var d=[],e=0;e<c;e++)for(var g=0;g<b.Wc.length;g++){var h=b.Wc[g];d.push(new ha(h.D(),h.e,h.f))}return d}
function za(b){var c={};E.w.forEach(function(b){c[b.j]=0});b.k.forEach(function(b){c[b.fc.j]+=1});return c}function Ka(b,c){for(var d=0;d<b.k.length;d++)if(b.k[d]==c)return d;return-1}function La(b,c){for(var d=m.a,e=0;e<d.k.length;e++){var g=d.k[e];if(g.e==b&&g.f==c)return!0}return!1}function Ma(){var b=[];m.a.k.forEach(function(c){c.Na<c.ke&&(c.Na++,b.push(c))});return b}
function Na(b){for(var c=m.a,d=b.e,e=b.f,g=0;g<c.k.length;g++){var h=c.k[g],i=h.f;if(Math.abs(h.e-d)<=1&&Math.abs(i-e)<=1){var j;if(E.b.wb||E.b.te||c.k.length<=1)j=1;else{i=c.k.length;j=c.Ta[h.Qa().j]/i*i;i=j<=1?j:(i-j)/(i-1);i*=i;if(E.b.Dh){j=c;var l=h.e,n=h.f,r=h.Qa(),t=1,v=a;for(v in j.k){var p=j.k[v],z=p.e,s=p.f;if(!(z==l&&s==n)&&(E.b.Eh||Math.abs(z-l)<=1&&Math.abs(s-n)<=1))t*=r.ac(p.Qa())}i*=t}j=i}i=b;l=!c.Qc;if(h.Na>h.xa)if(n=0,E.b.te){if(i.cc<100){n=h.xa*h.Fb*j;ka(i,n);if(l&&E.b.Xc)i.ca=h.xa;
h.Na-=h.xa}}else if(i.va[h.fc.j]<100){r=h.xa*h.Fb*E.w.length;n=r*j;la(i,n,h.fc);if(l&&E.b.Xc)i.ca=h.xa;h.Na-=E.b.Ch?r:h.xa}}}}function Oa(b){var c=m.a;if(!E.b.zc&&E.b.Ob){var d=b.e,e=b.f;b.dc=!1;for(var c=c.ua,g=0;g<c.length;g++){var h=c[g],i=h.f;if(Math.abs(h.e-d)<=1&&Math.abs(i-e)<=1&&!E.b.zc&&E.b.Ob&&b.D().me&&h.D().he)b.dc=!0}b.dc&&ka(b,-10)}};function Pa(b,c,d){this.A=b;this.j=c;this.t=d;this.Uc=[];this.ac=function(){return 1}}Pa.prototype.getName=k("A");Pa.prototype.Q=aa("A");function G(b,c){b.Uc.push(Qa(c));c.Nc=b}function H(b,c,d,e,g,h,i){this.A=b;this.j=c;this.$=d;this.bb=e;this.pb=g;this.Na=h;this.xa=i}H.prototype.getName=k("A");H.prototype.Q=aa("A");H.prototype.qa=aa("$");H.prototype.Qa=k("Nc");function Qa(b){return new H(b.A,b.j,b.$,b.bb,b.pb,b.xa,b.xa)}
function Ra(b,c,d){this.fc=b.Nc;this.t=b.Nc.t;this.Db=b;this.mg=b.j;this.ke=b.Na;this.xa=b.xa;this.bb=b.bb;this.pb=b.pb;this.Na=b.Na;this.Fb=1;this.moveTo(c,d)}Ra.prototype.getName=k("mg");Ra.prototype.Qa=k("fc");Ra.prototype.D=k("Db");Ra.prototype.xc=function(){return[this.e,this.f]};Ra.prototype.moveTo=function(b,c){this.e=b;this.f=c};var E={};
initWorld=function(){this.b={Tf:-3,Uf:2,Ua:!0,qg:!1,Xc:!0,pg:!0,jc:0,wb:!1,te:!1,Dh:!1,Eh:!1,Ch:!1,Fh:!1,uj:!1,Hc:0,toJSON:function(){var b={},c;for(c in this)this.hasOwnProperty(c)&&$.W(typeof this[c],["number","string","boolean"])>-1&&(b[c]=this[c]);return $.toJSON(b)},sf:function(b){var b=$.sf(b),c;for(c in b)this[c]=b[c]},load:function(){localStorage&&localStorage.Pf&&this.sf(localStorage.Pf)},Yh:function(){if(localStorage)localStorage.Pf=this.toJSON()}};this.lb={};this.w=[];this.Bd=[];this.kc=
[];this.xh=function(){this.w=[I.Ha,I.Ia,I.Ja];this.kc&&this.bi()};this.yh=function(){this.Bd=I.Vf.concat(I.Wf.concat(I.bg))};this.wh=function(){this.kc=[J,$a,ab]};this.bi=function(){for(var b in this.kc)this.kc[b].Sa=this.w};this.Bh=function(){var b=m.Oa,c;for(c in this.Bd){var d=this.Bd[c];if(d.j==b)return d}};this.fb=this.Pa=this.a=f;this.b.jc=this.b.Tf;this.b.Hc=this.b.Uf};initWorld.apply(E);var Fa="0FFF1F";function Ea(){this.t="0FFF1F"}function Ea(b){this.t=b}function Ea(b,c,d){this.t=b;this.e=c;this.f=d}Ea.prototype.xc=function(){return[this.e,this.f]};Ea.prototype.moveTo=function(b,c){this.e=b;this.f=c};var K=["Novice","Planner","Expert","Visionary","Genius"],bb=[500,1E3,2500,5E3,0],cb=[0,100,200,300,500];
function db(){var b=m.c,c=m.a;b.tb=c.m||b.tb;b.Ce=c.K||b.Ce;if(b.Te<b.tb)b.Te=b.tb;if(b.Kb<b.V)b.Kb=b.V;b.Lb++;b.hd+=b.vb;b.fd+=b.gb;b.gd+=b.hb;b.Sg=b.hd/b.Lb;b.Pg=b.fd/b.Lb;b.Qg=b.gd/b.Lb;for(var c=Object.aj(b.ub),d=0;d<c.length;d++){var e=c[d],g=b.ub[e],h=b.Ue[e]||0;h+=g;b.Ue[e]=h;b.Rg[e]=h/b.Lb}if(b.md<b.V)b.md=b.V;if(b.ef<b.tb)b.ef=b.tb;b.sb+=b.Ea;b.Tb++;b.Ga+=b.vb;b.Mf+=b.gb;b.Nf+=b.hb;b.ug=b.Ga/b.Tb;b.rg=b.Mf/b.Tb;b.sg=b.Nf/b.Tb;for(d=0;d<c.length;d++)e=c[d],g=b.ub[e],h=b.Of[e]||0,h+=g,b.Of[e]=
h,b.tg[e]=h/b.Tb;b.Ga>bb[3]?(b.pa=K[4],b.Pb=bb[0]):b.Ga>bb[2]?(b.pa=K[3],b.Pb=bb[3]-b.Ga):b.Ga>bb[1]?(b.pa=K[2],b.Pb=bb[2]-b.Ga):b.Ga>bb[0]?(b.pa=K[1],b.Pb=bb[1]-b.Ga):b.Pb=bb[0]-b.Ga}function eb(){var b=m.c;b.V=b.Kb}function fb(){var b=m.c,c=m.Pa;b.V+=m.ag;b.vb++;b.De++;b.Ea+=c<5?4:c<10?3:c<20?2:1};function gb(b,c){this.A=b;this.vi=c}gb.prototype.getName=k("A");gb.prototype.Q=aa("A");function Event(b,c,d,e,g,h){this.type=b;this.ng=c;this.fg=d;this.og=e;this.hg=g;this.ti=h}function EventTarget(){this.Eb={}}EventTarget.prototype={ic:function(b,c){typeof this.Eb[b]=="undefined"&&(this.Eb[b]=[]);this.Eb[b].push(c)},Qe:function(b){typeof b=="string"&&(b={type:b});if(!b.target)b.target=this;if(!b.type)throw Error("Event object missing 'type' property.");if(this.Eb[b.type]instanceof Array)for(var c=this.Eb[b.type],d=0,e=c.length;d<e;d++)c[d].call(this,b)}};
m.Zg=function(){m.uc.ic("game",function(b){typeof console!="undefined"&&console.log("Game event "+b.fg+" logged at:"+b.og)});m.uc.ic("resource",function(b){var c=b.ng;if(b.hg.m==1){var b=c.Qa(),c=b.getName(),d=b.t;if(m.a.Ta[b.j]==1)m.o=new o("Well done! You've added your first "+c+" resource!"),m.o.Oc=80,m.o.je="rgba(0, 0, 0)",m.o.ge=d}})};function o(b,c,d,e,g,h,i,j,l){this.Tc=b||"";this.za=e||m.vc;this.La=g||150;this.e=c||Math.random()*(m.q-m.Mc);this.f=d||Math.random()*(m.r-m.ee);this.qe=h||m.Mc;this.Oc=i||m.ee;this.ge=j||"rgba(32, 98, 210)";this.je=l||"rgba(255, 255, 255)";this.ig=2;this.gg="500 14px/2 Unknown Font, sans-serif"};m.Ud=new H("Farm","farm","/images/icons/truck.png",10,20,100,20);m.be=new H("Shop","shop","/images/icons/basket.png",15,25,150,30);m.Nd=new H("Bank","bank","/images/icons/dollars.png",20,30,200,50);m.Td=new H("Factory","factory","/images/icons/factory-2.png",25,40,250,70);m.de=new H("Stockmarket","stockmarket","/images/icons/stockmarket.png",30,50,300,90);m.Wd=new H("Fresh Water","water","/images/icons/recycled-water.png",10,20,100,10);
m.fe=new H("Wildlife Park","park","/images/icons/butterfly.png",15,25,150,15);m.Pd=new H("Clear Air","air","/images/icons/renewable.png",20,30,200,25);m.Xd=new H("Green Energy","energy","/images/icons/eco-power.png",25,40,250,35);m.Od=new H("Biodiversity","biodiversity","/images/icons/biodiversity.png",30,300,100,45);m.Qd=new H("Clinic","clinic","/images/icons/bandaid.png",10,20,100,5);m.ae=new H("School","school","/images/icons/abc.png",15,25,150,8);
m.Yd=new H("Legal System","legal","/images/icons/scales.png",20,30,200,15);m.Rd=new H("Democracy","democracy","/images/icons/microphone.png",25,40,250,20);m.Vd=new H("Festival","festival","/images/icons/martini.png",30,50,300,25);m.ii=new H("Travel","travel","/images/icons/aeroplane.png",30,50,300,25);m.pi=new H("Travel","travel","/images/icons/travel.png",30,50,300,25);m.Lc=["farm","water","clinic"];m.Vb=m.Lc.concat(["shop","park","school"]);m.Ub=m.Vb.concat(["bank","air","legal"]);
m.Xb=m.Ub.concat(["factory","energy","democracy"]);m.ab=m.Xb.concat(["stockmarket","biodiversity","festival"]);var m=m||{},I=I||{};I.Ha=new Pa("Economic","eco","44ABE0");I.Ia=new Pa("Environmental","env","ABBB2A");I.Ja=new Pa("Social","soc","DE1F2A");I.Ha.ac=function(b){var b=b.j,c=1;b=="eco"?c*=1:b=="env"?c*=1.2:b=="soc"&&(c*=0.8);return c};I.Ia.ac=function(b){var b=b.j,c=1;b=="eco"?c*=0.25:b=="env"?c*=1.2:b=="soc"&&(c*=1);return c};I.Ja.ac=function(b){var b=b.j,c=1;b=="eco"?c*=0.5:b=="env"?c*=1.1:b=="soc"&&(c*=1.2);return c};I.Vf=[m.Ud,m.be,m.Nd,m.Td,m.de];I.Wf=[m.Wd,m.fe,m.Pd,m.Xd,m.Od];
I.bg=[m.Qd,m.ae,m.Yd,m.Rd,m.Vd];I.pc=function(){G(I.Ha,m.Ud);G(I.Ha,m.be);G(I.Ha,m.Nd);G(I.Ha,m.Td);G(I.Ha,m.de);G(I.Ia,m.Wd);G(I.Ia,m.fe);G(I.Ia,m.Pd);G(I.Ia,m.Xd);G(I.Ia,m.Od);G(I.Ja,m.Qd);G(I.Ja,m.ae);G(I.Ja,m.Yd);G(I.Ja,m.Rd);G(I.Ja,m.Vd);E.xh();E.yh()};m=m||{};m=m||{};m.mc=function(){var b=$("#content-pane"),c=$("#wrapper"),d=$("#world"),e=$("#gameworld"),b=b.position().left,c=c.position().left,d=d.position().left,e=e.position().left;return b+c+d+e};m.$c=function(){var b=$("#content-pane"),c=$("#wrapper"),d=$("#world"),b=b.position().top,c=c.position().top,d=d.position().top;return b+c+d};
m.Lh=function(){var b=m.mc(),c=m.$c();m.lf=$("<div></div>").oa("New Level").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"New Level",na:{Play:function(){$(this).d("close");var b=$("#map_canvas, #baseCanvas, #scrollingCanvas, #noticeCanvas"),c=$("#world"),d=c.position().left,e=c.position().top,g=c.width(),h=c.height();c.N({width:0,height:0,left:d+Math.floor(Math.random()*g),top:e+Math.floor(Math.random()*h)});c.lc({width:g,height:h,left:d,top:e},1E3);b.N({width:0,height:0});b.lc({width:g,
height:h},1E3);m.ud()},Cancel:function(){$(this).d("close")}},open:function(){$("#level-gallery-tabs").Sb()}});m.Be=$("<div></div>").oa("Level Complete!").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Level Complete!",na:{"Next Level":function(){m.jb();$(this).d("close")},Cancel:function(){m.jb();$(this).d("close")}}});m.Ae=$("<div></div>").oa("Complete game!").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Fierce Planet Complete!",na:{"Bonus Level":function(){m.jb();
$(this).d("close")},"New Game":function(){m.Dc();$(this).d("close")},Cancel:function(){$(this).d("close")}}});m.Se=$("<div></div>").oa("Game Over!").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Game Over!",na:{"Restart Level":function(){m.Rb();$(this).d("close")},"New Game":function(){m.Dc();$(this).d("close")}}});m.Jd=$("#delete-upgrade-dialog").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Upgrade or Delete Resource",na:{Cancel:function(){$(this).d("close")}}});
m.zf=$("#resource-gallery-tabs").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Resource Gallery",na:{"Save Capabilities":function(){m.Ad();m.Hh();$(this).d("close")},Cancel:function(){$(this).d("close")}},open:function(){$("#resource-gallery-tabs").Sb()}});m.bh=$("#level-gallery-dialog").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Level Gallery",na:{"Open level":function(){m.jb();$(this).d("close")},Cancel:function(){$(this).d("close")}},open:function(){$("#level-gallery-tabs").Sb()}});
m.Ff=$("#settings-dialog").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Settings",na:{Save:function(){m.Kh();$(this).d("close")},Reset:function(){var b=E.lb;initWorld.apply(E);m.ff();E.lb=b;E.lb.pc&&E.lb.pc();m.We()},Cancel:function(){$(this).d("close")}},open:function(){$("#settings-tabs").Sb()}});$("#agentCostPerMove").Gd({value:E.b.jc,min:-10,max:-1,step:1,lc:"normal",Wh:function(b,c){$("#agentCostPerMoveDisplay")[0].innerHTML=c.value}});$("#rateOfResourceRecovery").Gd({value:E.b.Hc,
min:1,max:10,step:1,lc:"normal",Wh:function(b,c){$("#rateOfResourceRecoveryDisplay")[0].innerHTML=c.value}});$("#agentCostPerMoveDisplay")[0].innerHTML=E.b.jc;$("#rateOfResourceRecoveryDisplay")[0].innerHTML=E.b.Hc;m.Bj=$("<div></div>").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Vital Statistics",na:{OK:function(){$(this).d("close")}}});var d=m.q*3/5,e=m.r*3/4,g=b+(m.q-d)/2,h=c+(m.r-e)/2;m.Va=$("#level-features").d({position:[g,h],width:d,height:e,ea:!1,ga:!0,title:"Add design features",
na:{Cancel:function(){$(this).d("close")}}});m.cj=$("<div></div>").oa("Open level editor").d({position:[m.mc(),m.$c()],width:487,height:407,ea:!1,ga:!0,title:"Level Setup",na:{Cancel:function(){$(this).d("close")}},open:function(){$("#level-list-tabs").Sb()}});m.Oe=$("<div></div>").oa("Edit level properties").d({position:[b,c],width:m.q+7,height:m.r+7,ea:!1,ga:!0,title:"Edit level properties",na:{"Save Level":function(){$(".edit_level_properties").submit();m.O();$(this).d("close")},Cancel:function(){$(this).d("close")}},
open:function(){$("#edit-properties-tabs").Sb()}});$("#del-button").click(function(){m.Fe();m.Jd.d("close")});$("#upg-button").click(function(){m.ci();m.Jd.d("close")});$("#tutorial").click(function(){if(confirm("Stop current game and begin the tutorial?"))m.I=0,m.Aa=!0,m.Rb()})};m.Rh=function(){m.c.id>-1?m.Ic(function(){m.pf()}):m.pf()};m.pf=function(){m.Se.oa("Unfortunately Fierce Planet has gotten the better of its citizens! Click 'Restart Level' or 'New Game' to try again."+m.kd()).d("open")};
m.Nh=function(){m.c.id>-1?m.Ic(function(){m.nf()}):m.nf()};m.nf=function(){m.Ae.oa("Congratulations! In spite of challenges ahead, the citizens of Fierce Planet look forward to a bright and sustainable future!"+m.kd()).d("open");$("#gotoResourceGallery").click(m.Fd)};m.Oh=function(){m.c.id>-1?m.Ic(function(){m.of()}):m.of()};m.of=function(){m.Be.oa("<div>"+m.a.Y+"</div>"+m.kd()).d("open")};
m.Fd=function(){m.Nb();$("#current-profile-class")[0].innerHTML=m.c.pa;$("#current-credits")[0].innerHTML=m.c.sb;$("#current-capabilities")[0].innerHTML=m.c.L.join(", ");var b=[],c=[];if(m.pa==K[0])b=m.Lc;else if(m.pa==K[1])b=m.Vb;else if(m.pa==K[2])b=m.Ub;else if(m.pa==K[3])b=m.Xb;else if(m.pa==K[4])b=m.ab;for(var b=m.ab,d=$(".purchase"),e=0;e<d.length;e++){var g=d[e],h=g.id,h=h.split("-purchase")[0],i=0;$.W(h,m.Vb)>-1?i=cb[1]:$.W(h,m.Ub)>-1?i=cb[2]:$.W(h,m.Xb)>-1?i=cb[3]:$.W(h,m.ab)>-1&&(i=cb[4]);
$.W(h,b)>-1&&$.W(h,m.c.L)==-1&&i<m.c.sb&&c.push(g)}for(e=0;e<c.length;e++)g=c[e],h=g.id,h=h.split("-purchase")[0],i=0,$.W(h,m.Vb)?i=cb[1]:$.W(h,m.Ub)?i=cb[2]:$.W(h,m.Xb)?i=cb[3]:$.W(h,m.ab)&&(i=cb[4]),g.addEventListener("click",function(b){var c=this.id,d=c.split("-purchase")[0],e=$("#"+c+"")[0].title;if($.W(d,m.c.L)==-1&&confirm('Purchase item "'+e+'"?'))m.c.sb-=i,m.c.L.push(d),$("#current-credits")[0].innerHTML=m.c.sb,$("#current-capabilities")[0].innerHTML=m.c.L.join(", "),$("#"+c).Qb("active"),
$("#"+c).qb("inactive");b.stopPropagation();return!1},!0),$("#"+g.id).Qb("inactive"),$("#"+g.id).qb("active");m.zf.d("open")};m.Gf=function(){m.Nb();m.Ff.d("open")};m.Th=function(){m.Nb();m.bh.d("open")};
m.Ph=function(){m.Nb();m.Md=$("<div></div>").oa("<div class='   credits'>Development Director</div><div>Liam Magee</div><div class='credits'>Art &amp; Design</div><div>Steven Harris</div><div class='credits'>Game Conception &amp; Testing</div><div>Joshua Magee</div><div>Jakki Mann</div><div class='credits'>Images and Sounds</div><div><a href='http://www.publicdomainpictures.net'>Public Domain Pictures</a></div><div><a href='http://freesound.org'>thefreesoundproject</a></div><div><a href='http://opengameart.org'>OpenGameArt.org</a></div>").d({position:[m.mc(),110],
width:487,height:407,ea:!1,ga:!0,title:"Credits",na:{OK:function(){$(this).d("close")}}});m.Md.d("open")};m=m||{};m.O=function(){$("#map_canvas").empty();m.M("baseCanvas");m.M("resourceCanvas");m.M("scrollingCanvas");m.M("noticeCanvas");m.M("agentCanvas");m.Gg();m.Ke();m.qc();m.rc();m.cd();m.dd();m.Ne()};m.Wa=function(){m.M("baseCanvas");m.M("resourceCanvas");m.M("agentCanvas");m.Ke();m.qc();m.rc();m.cd()};m.Qi=function(){for(var b=m.a.n,c=0;c<b.length;c+=1)b[c]!=a&&m.Ig(b[c])};
m.Ig=function(b){var c=$("#baseCanvas")[0].getContext("2d"),d=b.e*m.i,e=b.f*m.h;c.clearRect(d+1,e+1,m.i-1,m.h-1);if(b.f==0||m.a.n[(b.f-1)*m.a.l+b.e]==a){var g=c.createLinearGradient(d,e,d,e+m.h/4);g.addColorStop(0,"#060");g.addColorStop(1,"#"+b.t);c.fillStyle=g}else c.fillStyle="#"+b.t;c.fillRect(d,e,m.i,m.h);c.strokeStyle="#fff";c.strokeRect(d,e,m.i,m.h)};
m.Ke=function(){for(var b=$("#baseCanvas")[0].getContext("2d"),c=m.a,d=[],e=0;e<c.B;e++)for(var g=0;g<c.l;g++)c.n[e*c.l+g]==a&&d.push([g,e]);for(c=0;c<d.length;c+=1){var g=d[c],e=g[0],h=g[1],g=e*m.i,i=h*m.h;b.clearRect(g+1,i+1,m.i-1,m.h-1);if(!E.b.cf)h==0||m.a.n[(h-1)*m.a.l+e]!=a?(e=b.createLinearGradient(g,i,g,i+m.h/4),e.addColorStop(0,"#ccc"),e.addColorStop(1,"#eee"),b.fillStyle=e):b.fillStyle="#eee",b.border="1px #eee solid",b.fillRect(g,i,m.i,m.h);if(!E.b.df)b.strokeStyle="#ccc",b.strokeRect(g,
i,m.i,m.h)}};m.Mi=function(){m.a.ri!=a&&$("#baseCanvas")[0].getContext("2d").drawImage(m.a.$,0,0)};m.Gg=function(){if(m.a!=a){var b=hb.nc();$.extend(b,m.a.z);m.p>1&&(b.zoom+=Math.log(m.p)/Math.log(1.5));m.C=hb.bd(b);m.fj=b}else m.C=new google.g.Zd($("#map_canvas")[0],b)};m.Ni=function(){m.a.z!=a&&m.a.z.latitude!=a&&m.a.z.longitude!=a||m.a.oe!=a&&$("#map_canvas").nj('<img src="'+m.a.oe+'"/>').N("image-orientation: 135deg")};
m.rc=function(){for(var b=$("#baseCanvas")[0].getContext("2d"),c=0;c<m.a.Z.length;c++){var d=m.a.Z[c],e=d[0]*m.i+m.i/2,d=d[1]*m.h+m.h/2,g=m.kb/2;b.beginPath();b.arc(e,d,g,0,Math.PI*2,!1);b.closePath();b.strokeStyle="#000";b.stroke();b.fillStyle="#fff";b.fill();var h=(m.Pa-1)/m.a.u;b.beginPath();b.moveTo(e,d);b.arc(e,d,g,-Math.PI/2,-Math.PI/2+Math.PI*2*h,!1);b.closePath();b.strokeStyle="#000";b.stroke();b.fillStyle="#93C83E";b.fill()}};
m.qc=function(){for(var b=$("#baseCanvas")[0].getContext("2d"),c=0;c<m.a.ja.length;c++){var d=m.a.ja[c],e=d[0]*m.i+m.i/2,d=d[1]*m.h+m.h/2,g=m.kb/2;b.beginPath();b.arc(e,d,g,0,Math.PI*2,!1);b.closePath();b.strokeStyle="#000";b.stroke();b.fillStyle="#93C83E";b.fill();var h=(m.Pa-1)/m.a.u;b.beginPath();b.moveTo(e,d);b.arc(e,d,g,-Math.PI/2,-Math.PI/2+Math.PI*2*h,!1);b.closePath();b.strokeStyle="#000";b.stroke();b.fillStyle="#fff";b.fill()}};
m.Hg=function(){if(m.o!=f){m.M("noticeCanvas");var b=$("#noticeCanvas")[0].getContext("2d"),c=m.o.Tc,d=m.o.za,e=m.o.La,g=Math.pow((e-(m.P-d))/e-0.1,0.5),h=m.o.e,i=m.o.f,j=m.o.qe,l=m.o.Oc,n=m.od(m.o.je,g),g=m.od(m.o.ge,g),r=m.o.ig;b.font=m.o.gg;b.lineWidth=r;b.clearRect(h-1,i-1,j+2,l+2);if(!(d>m.P||d+e<m.P)){b.beginPath();b.moveTo(h+10,i);b.lineTo(h+j-10,i);b.arcTo(h+j,i,h+j,i+10,10);b.lineTo(h+j,i+l-10);b.arcTo(h+j,i+l,h+j-10,i+l,10);b.lineTo(h+10,i+l);b.arcTo(h,i+l,h,i+l-10,10);b.lineTo(h,i+10);
b.arcTo(h,i,h+10,i,10);b.closePath();b.strokeStyle=n;b.stroke();b.fillStyle=g;b.fill();c=m.Ug(b,c,j-20);b.fillStyle=n;for(n=0;n<c.length;n++)b.fillText(c[n],h+10,i+20*(n+1))}}};
m.Ug=function(b,c,d){var e=b.measureText(c).width;if(e<d)return[c];for(var e=c.length/Math.ceil(e/d),g=[],c=c.split(" "),h="",i=0;i<c.length;i++){var j=c[i];if(b.measureText(h+j+" ").width<d)h+=j+" ";else if(h.length==0&&b.measureText(j).width>=e){var l=b.measureText(j).width,l=j.length/Math.ceil(l/d);h+=j.substring(0,l-1)+"-";c.splice(i,0,j.substring(l,j.length));g.push(h);h=""}else g.push(h),h=j+" "}g.push(h);return g};
m.od=function(b,c){var d=b;return d=b.length==6?"rgba("+parseInt(b.substring(0,2),16)+", "+parseInt(b.substring(2,4),16)+", "+parseInt(b.substring(4,6),16)+", "+c+")":b.split(")").join(", "+c+")")};m.cd=function(){for(var b=0;b<m.a.k.length;b+=1)m.sc(m.a.k[b])};
m.sc=function(b){var c=$("#resourceCanvas")[0].getContext("2d"),d=b.e*m.i,e=b.f*m.h,g=b.Na/b.ke*100,h=b.t;c.clearRect(d,e,m.i,m.h);c.fillStyle="#fff";c.fillRect(d,e,m.i,m.h);var i=m.Ge(g,g,g,h),g=m.h*(1-g/100)/1.2|0,j=c.createLinearGradient(d,e+g,d,e+m.h);j.addColorStop(0,"#fff");j.addColorStop(0.5,"#"+h);j.addColorStop(1,"#"+h);c.fillStyle=j;c.strokeStyle="#333";c.fillRect(d,e+g,m.i,m.h-g);switch(b.Fb){case 2:c.lineWidth=2;c.strokeStyle="#666";c.strokeRect(d+4,e+4,m.i-8,m.h-8);break;case 3:c.lineWidth=
4;c.strokeStyle="#666";c.strokeRect(d+6,e+6,m.i-12,m.h-12);break;case 4:c.fillStyle="#666",c.fillRect(d+8,e+8,m.i-16,m.h-16)}c.lineWidth=4;c.strokeStyle="#"+i;if(b.Db.$)h=new Image,h.src=b.Db.$,c.drawImage(h,d+4,e+4,m.i-8,m.h-8)};m.ye=function(b){$("#resourceCanvas")[0].getContext("2d").clearRect(b.e*m.i,b.f*m.h,m.i,m.h)};m.M=function(b){b=$("#"+b)[0];b.getContext("2d").clearRect(0,0,b.width,b.height)};m.xe=function(){m.we(m.a.ua)};
m.we=function(b){var c=$("#agentCanvas")[0].getContext("2d");if(m.sa>0)for(var d=0;d<b.length;d+=1){var e=b[d],g=e.Gb,h=e.Hb,i=m.ld(e),e=i.pd*m.i+g+1,i=i.qd*m.h+h+1;c.clearRect(e,i,m.i+g+1,m.h+h+1);if(E.b.re)c.beginPath(),c.arc(e+m.i/2,i+m.h*1.2,2,0,Math.PI*2,!1),c.closePath(),c.strokeStyle="#000",c.stroke(),c.fillStyle="#000",c.fill()}};
m.Ge=function(b,c,d,e){var g=e.length==3?1:2,h=Math.pow(16,g),i=parseInt(e.slice(0,1*g),16),j=parseInt(e.slice(1*g,2*g),16),e=parseInt(e.slice(2*g,3*g),16),b=Math.floor((100-b)/100*(h-i)),c=Math.floor((100-c)/100*(h-j)),d=Math.floor((100-d)/100*(h-e)),i=(i+b<h?i+b:h-1).toString(16),j=(j+c<h?j+c:h-1).toString(16),h=(e+d<h?e+d:h-1).toString(16),i=i.length<g?i+"0":i,j=j.length<g?j+"0":j,h=h.length<g?h+"0":h;return i+j+h};m.Ve=function(b){return b.cb.e<b.e?0:1};
m.ld=function(b){var c=b.cb.e,d=b.cb.f,e=b.e,g=b.f,h=b.ca,i=(h-b.nb)/h,b=e-(e-c)*i,h=g-(g-d)*i;if(m.a.Zb){var j=i<0.5;e==m.$a-1&&c==0?j?(g=(e-m.$a)*i,b=e-g):b=1-i:e==0&&c==m.$a-1?j?b=0-i:(g=(m.$a-c)*i,b=m.$a-g):g==m.Za-1&&d==0?j?(e=(g-m.Za)*i,h=g-e):h=1-i:g==0&&d==m.Za-1&&(j?h=0-i:(e=(m.Za-d)*i,h=m.Za-e))}return{pd:b,qd:h}};
m.Je=function(){for(var b=$("#agentCanvas")[0].getContext("2d"),c=m.a.ua,d=0;d<c.length;d+=1){var e=c[d];if(E.b.Cd||e.Ca.A!=ab.A)if(E.b.Ob||e.Ca.A!=$a.A){var g=m.ld(e),h=g.pd*m.i+e.Gb+m.i/2,g=g.qd*m.h+e.Hb+m.h/4,i=m.Ve(e),j=m.Ge(e.va[E.w[2].j],e.va[E.w[1].j],e.va[E.w[0].j],e.t.toString());e.dc&&(j="f00");try{eval(e.D().ob)(b,e,h,g,m.kb,m.Fc,j,m.sa,i)}catch(l){eval(J.ob)(b,e,h,g,m.kb,m.Fc,j,m.sa,i)}}}};
m.Cg=function(b){var c=$("#agentCanvas")[0].getContext("2d"),d=m.ld(b),e=d.pd*m.i+b.Gb+m.i/2,d=d.qd*m.h+b.Hb+m.h/4,g=m.Ve(b);b.D().Ib&&b.D().Ib(c,b,e,d,m.kb,m.Fc,"f00",m.sa,g)};
m.dd=function(){if(E.b.Ef){m.M("scrollingCanvas");var b=$("#scrollingCanvas")[0].getContext("2d");if(E.b.ve&&m.a.Ka!=a){var c=m.a.Ka;if(c.Rc.za<=m.P&&c.za+c.La>=m.P)m.o=c.Rc;if(c.za<=m.P&&c.za+c.La>=m.P){m.P>=c.za+c.La/2&&c.strike();var d=c.La/m.q,e=m.q-(m.P-c.za)/d*2,d=(c.za+c.La-m.P)/d*2,g=m.r;b.fillStyle=m.od(c.Db.t,0.5);b.fillRect(e,0,d,g);return}}m.Jc+m.Ed<480-m.Ed?m.Jc+=m.Ed:m.Jc=1;try{b.drawImage(m.Df,m.Jc,1,480,400,0,0,480,400)}catch(h){}}};
m.Fg=function(){$("#level-display")[0].innerHTML=m.a.m};m.Oi=function(){var b=$("#profile-class-display")[0];if(b!=a)b.innerHTML=m.c.pa};m.Me=function(){$("#score-display")[0].innerHTML=m.gi()};m.Eg=function(){var b=$("#highest-score-display")[0],c=m.c.md;c==a&&(c=0);b.innerHTML=c.toString()};m.Jb=function(){$("#goodness-display")[0].innerHTML=m.c.Ea.toString()};
m.Ib=function(){for(var b=$("#expired-citizens")[0],c="",d=0,e=m.a.J;d<e;d++)c+=d<m.c.gb?'<div id="expired-citizen"></div>':'<div id="healthy-citizen"></div>';b.innerHTML=c};m.Le=function(){var b=$("#saved-display")[0],c=m.a,d=c.G,e=c.u+c.G-1;b.innerHTML=m.c.vb.toString()+" out of "+(e*(e+1)/2-d*(d-1)/2)*c.ja.length};m.Jg=function(){$("#waves-display")[0].innerHTML=m.Pa.toString()+" out of "+m.a.u};m.Ne=function(){m.Fg();m.Me();m.Eg();m.Jg();m.Le();m.Ib();m.Jb()};
m.xb=function(b,c){for(var d=$(".scrollable-canvas"),e=0;e<d.length;e++){var g=d[e],h=g.getContext("2d");h.clearRect(0,0,g.width,g.height);h.translate(b,c)}m.yd+=c*m.p;m.xd+=b*m.p;m.C&&m.C.kj(-b*m.p,-c*m.p);m.Wa()};m.Fa=function(b){switch(b){case 0:m.xb(0,10);break;case 1:m.xb(0,-10);break;case 2:m.xb(10,0);break;case 3:m.xb(-10,0);break;case 4:m.xb(-m.xd/m.p,-m.yd/m.p)}};
m.zoom=function(b){for(var c=$(".scrollable-canvas"),d=m.p,e=0;e<c.length;e++){var g=c[e].getContext("2d");switch(b){case -1:m.p>1&&g.scale(1/1.5,1/1.5);break;case 0:g.scale(1/m.p,1/m.p);break;case 1:m.p<10&&g.scale(1.5,1.5)}}switch(b){case -1:m.p>1&&(m.p*=1/1.5);break;case 0:m.p=1;break;case 1:m.p<10&&(m.p*=1.5)}m.C&&(b=m.C.Ze(),d=Math.log(m.p)/Math.log(1.5)-Math.log(d)/Math.log(1.5),m.C.zj(b+d<1?1:b+d>20?20:b+d));m.Wa()};
m.Pi=function(){var b=$("#imageCanvas")[0],c=$("#baseCanvas")[0],d=$("#resourceCanvas")[0],e=$("#scrollingCanvas")[0],g=$("#noticeCanvas")[0],h=$("#agentCanvas")[0];b.getContext("2d").drawImage(c,0,0);b.getContext("2d").drawImage(d,0,0);b.getContext("2d").drawImage(e,0,0);b.getContext("2d").drawImage(g,0,0);b.getContext("2d").drawImage(h,0,0);b=b.toDataURL();$.rh("/levels/"+m.a.m+"/save_thumbnail",{Dj:b},function(){alert("data posted")})};m=m||{};
m.$g=function(){m.We();$("#playAgents").click(m.tf);$("#slowDown").click(m.Hf);$("#speedUp").click(m.If);$("#newGame").click(m.Dc);$("#restartLevel").click(m.Rb);$("#showResourceGallery").click(m.Fd);$("#panUp").click(function(){m.Fa(0)});$("#panDown").click(function(){m.Fa(1)});$("#panLeft").click(function(){m.Fa(2)});$("#panRight").click(function(){m.Fa(3)});$("#panReset").click(function(){m.Fa(4)});$("#zoomIn").click(function(){m.zoom(1)});$("#zoomOut").click(function(){m.zoom(-1)});$("#zoomReset").click(function(){m.zoom(0)});$("#settings").click(m.Gf);
$("#credits").click(m.Ph);$("#openLevelGallery").click(m.Th);$("#debug").click(m.sh);$("#replay").click(m.Ah);$("#script-editor").click(m.qh);$("#story-board").click(m.Vh);try{$("#show-level-properties").click(m.Uh),$("#refresh-tiles").click(m.vh),$("#fill-all").click(m.Mg),$("#undo-action").click(m.ai),$("#cancel-level-editor").click(m.wg),$("#clear-entry-points").click(m.xg),$("#clear-exit-points").click(m.yg),$("#edit-map").click(m.Kg),$("#save-map").click(m.Ih),$("#close-map").click(m.ze)}catch(b){typeof console!=
"undefined"&&console.log(b)}E.b.oc||($(document).rd(m.Ac),$("input, textarea, select, form").focus(function(){$(document).ia("keydown")}).blur(function(){$(document).rd(m.Ac)}),$(document).yi(function(){$("input, textarea, select").focus(function(){$(document).ia("keydown")}).blur(function(){$(document).rd(m.Ac)})}));m.Zc()};
m.Zc=function(){var b=$("#agentCanvas");typeof console!="undefined"&&console.log("Binding mouse events");b.click(m.Wg);b.click(m.th);E.b.se&&(b.lh(m.wf),b.mh(m.xf),b.nh(m.yf));b.oh(function(b,d){m.zoom(d);b.preventDefault();return!1})};m.$h=function(){var b=$("#agentCanvas");b.ia("click");b.ia("mousedown",m.wf);b.ia("mousemove",m.xf);b.ia("mouseup",m.yf);b.oh(function(b,d){m.zoom(d);b.preventDefault();return!1})};
m.wf=function(b){m.Ra=!0;m.ib=!1;if(b.offsetX||b.offsetX==0)m.T=b.offsetX,m.U=b.offsetY;else if(b.layerX||b.layerX==0)m.T=b.layerX,m.U=b.layerY};m.xf=function(b){if(m.Ra)m.ib=!0,m.Ie(b)};m.Ie=function(b){if(m.Ra){var c,d;if(b.offsetX||b.offsetX==0)c=b.offsetX,d=b.offsetY;else if(b.layerX||b.layerX==0)c=b.layerX,d=b.layerY;m.xb(c-m.T,d-m.U);m.T=c;m.U=d}};m.yf=function(b){b.preventDefault&&b.preventDefault();if(m.Ra&&m.ib)m.Ie(b),m.Ra=!1;return!1};
m.Ac=function(b){if(!E.b.oc&&!b.ctrlKey&&!b.altKey&&!b.metaKey)switch(b.which){case 107:m.zoom(1);break;case 109:m.zoom(-1);break;case 96:m.zoom(0);break;case 37:m.Fa(2);break;case 38:m.Fa(0);break;case 39:m.Fa(3);break;case 40:m.Fa(1);break;case 72:m.Fa(4);break;case 80:m.tf();break;case 78:m.Dc();break;case 82:m.Rb();break;case 87:m.Hf();break;case 70:m.If();break;case 84:$("#tutorial").click();break;case 71:$("#level-gallery").click();break;case 83:m.Gf();break;case 69:$("#editor").click();break;
case 52:b.shiftKey&&m.Fd()}};m.xi=function(b){var c=b.src;if(c!=a){var d=c.split(".");d.splice(d.length-1,0,"down");var e=d.join(".");b.addEventListener("mouseover",function(){b.src=e},!1);b.addEventListener("mouseout",function(){b.src=c},!1);b.addEventListener("mousedown",function(){b.src=e},!1);b.addEventListener("mouseup",function(){b.src=c},!1)}};
m.Wg=function(b){if(m.o!=f){var c=m.o,d=c.za,e=c.La;if(!(d>m.P||d+e<m.P)){var d=c.e,e=c.f,g=c.qe,c=c.Oc,h,i;if(b.offsetX||b.offsetX==0)h=b.offsetX,i=b.offsetY;else if(b.layerX||b.layerX==0)h=b.layerX,i=b.layerY;if(h>=d&&h<=d+g&&i>=e&&i<=e+c)m.o=a,m.M("noticeCanvas")}}};m.Ye=function(b){var c,d;if(b.offsetX||b.offsetX==0)c=b.offsetX,d=b.offsetY;else if(b.layerX||b.layerX==0)c=b.layerX,d=b.layerY;return{x:c,y:d}};m.getCurrentPosition=function(b){b=m.Ye(b);return m.Xe(b.x,b.y)};
m.Xe=function(b,c){b-=m.xd;c-=m.yd;b/=m.p;c/=m.p;b-=1/m.p;c-=1/m.p;var d=Math.floor(b/m.i),e=Math.floor(c/m.h),g=$("#baseCanvas").width(),h=$("#baseCanvas").height(),d=Math.floor(d/(g/m.q)),e=Math.floor(e/(h/m.r));return{yb:d,zb:e}};m.Ec=function(b){$("#notifications")[0].innerHTML=b};
m.dh=function(){var b="",c=m.a;c.$!=a&&(b+='<img src="'+c.$+'" alt="City Image" width="460" height="140">',c.aa&&(b+='<div style="font-size: 0.8em; text-align: right">'+c.aa+"</div>"));c.getName()!=a&&(b+="<h3>"+c.getName()+"</h3>");c.H!=a&&(b+=c.H);m.lf.oa(b).d("open")};m.Ad=function(){for(var b=0;b<m.ab.length;b++){var c=$.trim(m.ab[b]);try{var d=$("#"+c);d.qb("inactive")}catch(e){}}for(b=0;b<m.c.L.length;b++){c=$.trim(m.c.L[b]);try{d=$("#"+c),d.Qb("inactive"),m.ej(d[0])}catch(g){}}};
m.Bi=function(){var b=$("#levelInput").di();m.I=m.ad(b);m.Aa=!0;m.Id()};m.Ci=function(){var b=$(this).Yc("id"),b=b.substring(11);m.Yg(b);m.I=m.ad(b);m.Aa=!0;m.Id()};m.Yg=function(b){$(".thumbnail").N({color:"inherit",backgroundColor:"inherit"});b>0&&b<=11&&$("#levelSelect"+b).lc({color:"#000",backgroundColor:"#ffffaa"},500)};m.Ai=function(){var b=$("input[@name=difficultyInput]:checked").di();m.sd=m.ad(b)};
m.dj=function(){var b=$("body").width(),c=$("body").height();$("#content-pane").N({left:0,top:-110,width:b,height:c});$("#map_canvas, #baseCanvas, #resourceCanvas, #scrollingCanvas, #noticeCanvas, #agentCanvas").N({left:0,top:0,width:b,height:c});$("#controls").N({left:0,top:210,zIndex:1E3});$("#swatch").N({left:b-160,top:c-400,zIndex:1E3});m.O()};m=m||{};m.fh=function(){m.I=localStorage.I!=a?parseInt(localStorage.I):m.I;m.Aa=localStorage.Aa!=a?localStorage.Aa==="true":m.Aa;m.V=localStorage.V!=a?parseInt(localStorage.V):m.V};m.Id=function(){localStorage.I=m.I;localStorage.Aa=m.a.K;localStorage.c=$.toJSON(m.c)};m.Jh=function(){var b={},b=m.c;return{oj:$.toJSON(b)}};
m.kd=function(){return"<table><tr><td>Level:</td><td>"+m.a.m+"</td></tr><tr><td>Waves survived:</td><td>"+m.Pa+"</td></tr><tr><td>Score:</td><td>"+m.c.V+"</td></tr><tr><td>Citizens saved:</td><td>"+m.c.vb+"</td></tr><tr><td>Citizens expired:</td><td>"+m.c.gb+"</td></tr><tr><td>Resources spent:</td><td>"+m.c.hb+"</td></tr><tr><td>Resources remaining:</td><td>"+m.c.Ea+"</td></tr><tr><td></td><td></td></tr><tr><td>Total saved:</td><td>"+m.c.hd+"</td></tr><tr><td>Total expired:</td><td>"+m.c.fd+"</td></tr><tr><td>Total resources spent:</td><td>"+
m.c.gd+"</td></tr><tr><td>Profile class:</td><td>"+m.c.pa+"</td></tr><tr><td>Credits:</td><td><span style='font-weight:bold'>"+m.c.sb+" (<a href='#' id='gotoResourceGallery'>More</a>)</span></td></tr></table>"};m.Ic=function(b){m.c.id>-1&&$.rh("/profiles/"+m.c.id+"/update_stats",m.Jh(),b)};m.Hh=function(){m.Ic()};m=m||{};m.Mh=function(){for(var b=$("#agentCanvas"),c=$(".swatch-draggable"),d=f,e=0;e<c.length;e++)d=c[e],d.id&&$.W(d.id,m.c.L)!=-1&&($("#"+d.id).draggable({cursor:"pointer",Yi:"clone",start:function(){m.Oa=this.id}}),$("#"+d.id).click(function(){m.Oa=this.id}));b.Si({Ri:function(b){var c=$(this).ij(),b=m.Xe(b.pageX-c.left,b.pageY-c.top);m.tc(b.yb,b.zb)}})};
m.th=function(b){m.Ra=!1;if(!m.ib){for(var c=m.getCurrentPosition(b),d=c.yb,c=c.zb,e=0;e<m.a.k.length;e++){var g=m.a.k[e];if(g.e==d&&g.f==c){m.fb=g;confirm("Are you sure you want to delete this resource?")&&m.Fe();return}}e=m.a.n[c*m.a.l+d];E.b.Lf?e==a?(Aa(new Ea(Fa,d,c)),m.Wa()):m.Oa!=f?m.tc(d,c):(Da(d,c),m.Wa()):m.Oa!=f?m.tc(d,c):E.b.Bb&&m.Sh(b)}};
m.Sh=function(b){var c=m.getCurrentPosition(b),d=c.yb,e=c.zb;if((m.a.ta[[d,e]]!=a||m.a.$b)&&!La(d,e)){var c=m.mc(),g=m.$c(),d=m.Ye(b),e=d.y,d=c+d.x-100,e=g+e-120,d=d<c?c:d+200>c+m.q?c+m.q-200:d,e=e<g?g:e+240>g+m.r?g+m.r-240:e,c=Qa($("#swatch"));c.Yc("id","inline-swatch");c.N("left",0);c.N("top",0);m.gf=$("<div></div>").oa(c).d({title:"Add a Resource",position:[d,e],width:200,height:240,ea:!1,ga:!0});$('#inline-swatch div[class="title"]').remove();d=$("#inline-swatch .swatch-instance");c=f;for(g=0;g<
d.length;g++)c=d[g],c.id&&$.W(c.id,m.c.L)!=-1&&c.addEventListener("click",function(){var c=m.getCurrentPosition(b),d=c.yb,c=c.zb;if((m.a.ta[[d,c]]!=a||m.a.$b)&&!La(d,c))m.Oa=this.id,m.tc(d,c),m.Oa=f,m.gf.d("close")},!1);m.gf.d("open")}};m.Fe=function(){if(Ka(m.a,m.fb)>-1){m.c.Ea+=5;m.c.hb-=5;var b=m.a,c=m.fb,d=Ka(b,c);d>-1&&(b.k.splice(d,1),b.Ta[c.Qa().j]-=1);m.Jb();m.ye(m.fb)}};
m.ci=function(){var b=Ka(m.a,m.fb);b>-1&&(b=m.a.k[b],b.Fb<=4&&m.c.Ea>=b.pb&&(m.c.Ea-=b.pb,m.c.hb+=b.pb,b.Fb+=1,m.sc(b),m.Jb()))};m.tc=function(b,c){if((m.a.ta[[b,c]]!=a||m.a.$b)&&!La(b,c)){var d=new Ra(E.Bh(),b,c);if(m.c.Ea<d.bb)m.o=new o("Not enough resources for now - save some more agents!");else{var e=m.c,g=d.Qa().j;e.Ea-=d.bb;e.hb+=d.bb;e.ub[g]+=1;e=m.a;e.k.push(d);e.Ta[d.Qa().j]+=1;m.sc(d);m.Jb();m.uc.Qe(new Event("resource",d,"added",m.vc,m.a));if(E.b.Bb)m.Oa=f}}};
m.ah=function(){E.lb.pc&&E.lb.pc();for(var b=0;b<E.w.length;b++){var c=E.w[b],d='<div class="swatch-category" id="'+c.j+'"></div>';$("#swatch").append(d);d=$("#"+c.j);d.append('<div class="title">'+c.getName()+"</div>");d.N("background","#"+c.t);var e='<div class="gallery-category" id="gallery-'+c.j+'"></div>';$("#gallery-items").append(e);e=$("#gallery-"+c.j);e.append('<div class="title">'+c.getName()+"</div>");e.N("background","#"+c.t);for(var g=0,h=0;h<c.Uc.length;h++){var i=c.Uc[h];d.append('<div class="swatch-instance" title="'+
i.getName()+'"><div class="swatch-draggable" id="'+i.j+'"><img src="'+i.$+'" alt=""></div><div>'+i.bb+"</div></div>");var j=$("#"+i.j);g>0&&j.qb("inactive");e.append('<div class="swatch-instance inactive purchase" id="'+i.j+'-purchase" title="'+i.getName()+'"><img src="'+i.$+'" alt=""></div>');g++}}};m=m||{};
m.Qh=function(){$("#make-tile").click(function(){Aa(new Ea(Fa,m.T,m.U));m.Va.d("close");m.O()});$("#add-exit-point").click(function(){D(m.a,m.T,m.U);m.Va.d("close");m.O()});$("#add-entry-point").click(function(){Ba(m.a,0,0);C(m.a,m.T,m.U);m.Va.d("close");m.O()});$("#remove-entry-point").click(function(){Ba(m.a,m.T,m.U);m.Va.d("close");m.O()});$("#remove-exit-point").click(function(){Ca(m.a,m.T,m.U);m.Va.d("close");m.O()});$("#remove-resource").click(function(){var b=m.a,c;a:{c=m.T;for(var d=m.U,e=
0;e<b.k.length;e++){var g=b.k[e];if(g.e==c&&g.f==d){c=e;break a}}c=-1}c>-1&&(d=b.k[c],b.k.splice(c,1),b.Ta[d.Qa().j]-=1);m.Va.d("close");m.O()});m.Va.d("open")};m.Aj=function(){$("#delete-upgrade").Xg();$("#level-editor").show();var b=$("#agentCanvas");b.ia("click");b.ia("mousedown");b.ia("mousemove");b.ia("mouseup");b.lh(m.$e);b.mh(m.af);b.nh(m.bf);m.nd=!0;m.le()};m.$e=function(){m.ph=m.a.n.slice();m.Ra=!0;return m.ib=!1};
m.af=function(b){b.preventDefault&&b.preventDefault();if(m.Ra)m.ib=!0,b=m.getCurrentPosition(b),Da(b.yb,b.zb),m.Wa();return!1};m.bf=function(b){b.preventDefault&&b.preventDefault();b=m.getCurrentPosition(b);m.T=b.yb;m.U=b.zb;m.a.n[m.U*m.a.l+m.T]==a&&!m.ib?m.Qh():(Da(m.T,m.U),m.Wa());return m.Ra=!1};m.wg=function(){m.nd=!1;m.ze();var b=$("#agentCanvas");b.ia("mousedown",m.$e);b.ia("mousemove",m.af);b.ia("mouseup",m.bf);m.Zc();$("#level-editor").Xg();$("#swatch").show()};
m.ai=function(){var b=m.a;b.n=m.ph;Ga(b);m.O()};m.Uh=function(){m.Oe.d("open")};m.vh=function(){A(m.a);C(m.a,0,0);m.O()};m.Mg=function(){for(var b=m.a,c=0;c<b.l;c++)for(var d=0;d<b.B;d++)b.n[d*b.l+c]=a,b.ta[[c,d]]=a;C(m.a,0,0);m.O()};m.xg=function(){var b=m.a;b.ja=[];C(b,0,0);m.O()};m.yg=function(){m.a.Z=[];m.O()};m.Kg=function(){$("#map_canvas").N({zIndex:1E3});var b=hb.nc();$.extend(b,m.a.z);$.extend(b,{He:!1,jf:!0,qf:!0,rf:!0,Bf:!0,Cf:!0,Kf:!0,Qf:!0});m.C=hb.bd(b);m.Wa()};
m.Ih=function(){var b=m.C.Tg(),c=m.C.Vg(),d=m.C.Ze(),e=m.C.wc();m.a.z={S:b,ra:c,zoom:d,fa:e}};m.ze=function(){var b=hb.nc();$.extend(b,m.a.z);$.extend(b,{He:!0,jf:!1,qf:!1,rf:!1,Bf:!1,Cf:!1,Kf:!1,Qf:!1});m.C=hb.bd(b);$("#map_canvas").N({zIndex:1});m.Wa()};var m=m||{},L=L||m;$(document).qj(function(){m.eh();m.ue()});
m.sh=function(){m.dd();E.b.mf&&m.o!=a&&m.Hg();if(m.Cc<m.Zf/m.v)m.Cc++;else if(m.Kd<m.$f/m.v)m.Kd++;else{m.sa++;m.P++;m.vc++;m.vd&&m.we(m.vd);m.vd=[];m.xe();for(var b=[],c=0,d=m.a.ua,e=0;e<d.length;e++){var g=d[e],h=g.ca,i=g.nb%h;m.sa>=g.Cb&&i%h==0&&ia(g,m.a)}for(var j={withNoRepeat:!0,withNoCollision:!1},e=0;e<d.length;e++)if(g=d[e],E.b.Cd||g.D()!=ab)if(E.b.Ob||g.D()!=$a)if(h=g.ca,g.D()==J&&c++,m.sa>=g.Cb){i=g.nb%h;if(i==0){g.D()==J&&qa(m.a,g.e,g.f)&&(fb(),b.push(e),m.Me(),m.Jb(),m.Le());pa(g,j);
if(g.D()==J)g.nb=0,!m.a.Qc&&E.b.Xc&&na(g),!m.a.lg&&E.b.pg&&ma(g);if(g.s>m.td)m.td=g.s;if(g.D()==J||g.D()==ab)ka(g,E.b.jc),g.cc<=0&&!E.b.zc?(b.push(e),m.vd.push(g),m.Cg(g),g.D()==J&&m.c.gb++,m.Ib()):(Na(g),Oa(g))}g.D()==J&&g.nb++}if(m.c.gb>=m.a.J)return m.Og();for(e=b.length-1;e>=0;e-=1)m.a.ua.splice(b[e],1);if(c==0)if(m.Pa<m.a.u)m.Bg(),m.ud();else if(m.I<ib)m.Ag(),m.Cc=0;else return m.zg();else m.sa%m.Af==0&&Ma().forEach(function(b){m.sc(b)}),m.Je();E.b.vf&&m.uh()}};m=m||{};m.eh=function(){m.fh();m.ff();E.b.load();m.Lh();m.ah();m.Mh();m.$g();m.Zg();m.jb()};m.Dc=function(){if(m.Aa)m.I=1;var b=m.c;b.V=b.Kb=0;m.vc=0;m.jb()};m.jb=function(){m.nd=!1;m.Cc=0;m.P=0;m.ih=0;var b=m.c;b.Kb=b.V;m.o=f;if(m.da!=a)m.da.pause(),m.da=a;m.zd=[];m.ue();m.le();m.dh();m.o=m.a.R;$("#notifications").Ej(E.b.Jf);m.Ec("Starting level "+m.a.m+"...")};m.Rb=function(){eb();m.jb()};
m.ud=function(){m.td=0;m.sa=0;m.Kd=0;m.c.De=0;for(var b=m.a,c=J,d=m.wd,e=[],g=0;g<b.ja.length;g++)for(var h=b.ja[g],i=h[0],h=h[1],j=0;j<d;j++){var l=new ha(c,i,h);l.Cb=parseInt(Math.random()*ca*5);l.mb=E.b.Ua;E.b.qg&&la(l,Math.ceil(Math.random()*-50),E.w[Math.floor(Math.random()*E.w.length)]);e.push(l)}$.jh(e,Ja(b,d));$.jh(e,b.ne);Ia(b,e);m.Ec("New wave coming...");m.qc();m.rc();m.uc.Qe(new Event("game",this,"newWave",L.P,m.a));m.gc()};m.Bg=function(){m.Pa++;m.wd++;m.bc()};
m.Ag=function(){m.a.Ab&&m.a.Ab();db();m.a.K&&m.I++;m.bc();m.Oh()};m.zg=function(){m.a.Ab&&m.a.Ab();db();m.bc();m.Nh()};m.Og=function(){m.a.Ab&&m.a.Ab();eb();m.bc();m.Rh()};m.tf=function(){m.Ya?m.Nb():($("#playAgents").Qb("pausing"),$("#playAgents").qb("playing"),m.sa==0?m.ud():m.gc())};m.Nb=function(){m.Ya&&m.hc()};m.Hf=function(){m.v<10?m.v+=1:m.v<100&&(m.v+=10);m.Ec("Now playing at: "+Math.round(1E3/m.v)+" frames per second.");m.Ya&&m.gc()};
m.If=function(){m.v>10?m.v-=10:m.v>1&&(m.v-=1);m.Ec("Now playing at: "+Math.round(1E3/m.v)+" frames per second.");m.Ya&&m.gc()};
m.le=function(){typeof console!="undefined"&&console.log("Initialising world...");m.hc();if(m.Aa&&(m.I<0||m.I>11))m.I=1;if(m.Aa)try{m.a=eval("FiercePlanet.PresetLevels.level"+m.I.toString())}catch(b){m.a=eval("FiercePlanet.PresetLevels.level1")}else if(m.a==a)m.a=eval("FiercePlanet.PresetLevels.level1");if(m.Ld>0)m.a.u=m.Ld,m.Ld=0;m.Pa=1;Ia(m.a,[]);var c=m.a;c.k=[];c.ec=c.ec||[];for(var d in c.ec)c.k.push(c.ec[d]);c.Ta=za(c);if(m.a.Ka!=a)m.a.Ka.Sc=!1;c=m.c;c.vb=0;c.gb=0;c.Ea=m.a.ka||m.ce;c.hb=0;c.ub={};for(d=0;d<E.w.length;d++)c.ub[E.w[d].j]=
0;m.Af=Math.pow(E.b.Hc,m.sd-1);m.wd=m.a.G;m.$a=m.a.l;m.Za=m.a.B;m.i=Math.round(m.q/m.$a);m.h=Math.round(m.r/m.Za);m.kb=Math.round(m.i*0.5);m.Fc=Math.round(m.h*0.5);m.Df.src="/images/yellow-rain.png";m.a.ha&&m.a.ha();m.O()};m.bc=function(){m.hc();m.Id();m.Ne()};
m.gc=function(){m.startTime=new Date;typeof console!="undefined"&&console.log("Starting agents at "+m.startTime);clearInterval(m.eb);m.eb=setInterval("FiercePlanet.processAgents()",m.v);m.Ya=!0;$("#playAgents").Qb("pausing");$("#playAgents").qb("playing");if(E.b.Hd)if(m.da!=a)m.da.play();else if(m.a.la!=a)m.da=new Audio(m.a.la),m.da.loop=!0,m.da.addEventListener("ended",function(){m.da.currentTime=0;m.da.play()},!1),m.da.play()};
m.hc=function(){m.Xh=new Date;typeof console!="undefined"&&console.log("Pausing agents after "+(m.Xh-m.startTime));$("#playAgents").Qb("playing");$("#playAgents").qb("pausing");clearInterval(m.eb);m.Ya=!1;E.b.Hd&&m.da!=a&&m.da.pause()};m=m||{};m.Zf=3E3;m.$f=200;m.Af=5;m.v=20;m.ag=10;m.ce=100;m.qi=5;m.ji=1;m.Yf=2;m.li=3;m.ki=4;m.q=480;m.r=400;m.Mc=200;m.ee=150;E.lb=I;
m.c=new function(){this.id=-1;this.pa=K[0];this.L=m.Lc;this.Pb=0;this.status="";this.Nf=this.Mf=this.Ga=this.Tb=this.md=this.ef=this.sb=0;this.Of={};this.sg=this.rg=this.ug=0;this.tg={};this.gd=this.fd=this.hd=this.Kb=this.Te=this.Lb=0;this.Ue={};this.Qg=this.Pg=this.Sg=0;this.Rg={};this.tb=1;this.Ce=!0;this.gb=this.vb=this.De=this.Hi=this.V=0;this.Ea=m.ce;this.hb=0;this.ub={}};m.I=1;m.Pa=1;m.Aa=!0;m.a=f;m.Pe=f;m.Oa=f;m.fb=f;m.o=f;m.nd=!1;m.Ya=!1;m.Ra=!1;m.ib=!1;m.eb=0;m.uc=new EventTarget;m.zd=[];
m.Ld=0;m.td=0;m.ih=0;m.sd=m.Yf;m.Cc=0;m.Kd=0;m.wd=1;m.sa=0;m.P=0;m.vc=0;m.Xa=0;m.$a=14;m.Za=11;m.i=m.q/m.$a;m.h=m.r/m.Za;m.kb=m.i*0.5;m.Fc=m.h*0.5;m.Df=new Image;m.Jc=0;m.Ed=1;m.da=f;m.C=f;m.p=1;m.ed=1;m.xd=0;m.yd=0;m.T=f;m.U=f;m.Se=f;m.Be=f;m.Ae=f;m.Jd=f;m.zf=f;m.lf=f;m.Ff=f;m.Md=f;m.hi=f;m.Va=f;m.Oe=f;m=m||{};m.uh=function(){if(m.a!=a){typeof console!="undefined"&&console.log("Recording at: "+m.Xa);try{for(var b=new q(m.a.m),c=[],d=0,e=m.a.ua.length;d<e;d++){var g=m.a.ua[d],h=new ha(g.D(),g.e,g.f);h.cb=g.cb;h.Cb=g.Cb;h.ca=g.ca;c.push(h)}Ia(b,c);b.k=m.a.k;b.Ta=za(b);m.zd[m.Xa]=$.toJSON(b);m.Xa++}catch(i){}}};m.Ah=function(){m.hc();m.Pe=m.a;clearInterval(m.eb);m.Xa=0;m.sa=0;m.O();m.Ya=!0;setTimeout("FiercePlanet.replayStart()",100)};
m.sj=function(){m.eb=setInterval("FiercePlanet.replayStep()",m.v*2)};m.tj=function(){var b=m.zd[m.Xa];typeof console!="undefined"&&console.log("Replaying at: "+m.Xa);if(b==a)m.zh();else try{m.xe(),m.a=$.Lg(b),m.Xa++,m.sa++,m.M("resourceCanvas"),m.M("scrollingCanvas"),m.M("noticeCanvas"),m.M("agentCanvas"),m.qc(),m.rc(),m.cd(),m.dd(),m.Je()}catch(c){}};m.zh=function(){m.eb=clearInterval(m.eb);m.Xa=0;m.a=m.Pe;m.Ya=!1};m=m||{};$(document).zi(function(b,c,d){if(d.type=="post")d.data=(d.data?d.data+"&":"")+"authenticity_token="+encodeURIComponent(AUTH_TOKEN)});$(function(){$().zoom(function(b){typeof console!="undefined"&&console.log("zooming");switch(b){case 1:m.ed*=1.2;break;case -1:m.ed/=1.2;break;case 0:m.ed=1}})});m.ad=function(b){return Math.floor(b)};m.ue=function(){L.ei=L.ei||E;L.Gh=L.Gh||E.b;L.jj=m.c;L.bj=m.a;L.pj=m.fb;L.vj=m.Oa;L.x=m.T;L.y=m.U};
m.ff=function(){E.b.mf=E.b.mf||!0;E.b.Jf=E.b.Jf||!0;E.b.Ef=E.b.Ef||!0;E.b.ve=E.b.ve||!0;E.b.oc=E.b.oc||!0;E.b.Hd=E.b.Hd||!1;E.b.Bb=E.b.Bb||!1;E.b.se=E.b.se||!1;E.b.re=E.b.re||!1;E.b.cf=E.b.cf||!1;E.b.df=E.b.df||!1;E.b.Cd=E.b.Cd||!1;E.b.Ob=E.b.Ob||!1;E.b.Lf=E.b.Lf||!1;E.b.Zh=E.b.Zh||!1;E.b.vg=E.b.vg||!1;E.b.vf=E.b.vf||!1;E.b.zc=E.b.zc||!1};m.gi=function(){var b=m.c.V,c=5;c-=b.toString().length;if(c>0)return Array(c+(/\./.test(b)?2:1)).join("0")+b;return b};
m.We=function(){for(var b in E.b)if(E.b.hasOwnProperty(b)&&$.W(typeof E.b[b],["number","string","boolean"])>-1){var c=$("#"+b);if(c&&c.length>0)if(c[0].type=="checkbox")c[0].checked=E.b[b];else if(c.Yc("class")&&c.Yc("class").indexOf("slider-component")>-1)c.Gd("value",E.b[b]),$("#"+b+"Display")[0].innerHTML=E.b[b]}};
m.Kh=function(){var b=$('#settings-dialog input[type="checkbox"]'),c;for(c in b){var d=b[c].id;E.b[d]=b[c].checked}b=$("#settings-dialog .slider-component");for(c in b)d=b[c].id,E.b[d]=$("#"+d).Gd("value");E.b.Yh();E.b.oc?$(document).ia("keydown"):$(document).rd(m.Ac);m.$h();m.Zc();E.b.Fh?$("#upgrade-option").N("display","block"):$("#upgrade-option").N("display","none");m.Rb()};var hb=hb||{};
(function(){function b(b,c,d){var e=b.y,b=b.x,g=1<<c;if(e<0||e>=g)return f;if(b<0||b>=g)b=(b%g+g)%g;return d({x:b,y:e},c)}function c(b,c,d){for(var e=Math.pow(2,d),g=c.x,c=c.y,h=["t"],i=0;i<d;i++)e/=2,c<e?g<e?h.push("q"):(h.push("r"),g-=e):(g<e?h.push("t"):(h.push("s"),g-=e),c-=e);return b+h.join("")+".jpg"}var d={};d.moon={yc:function(c,d){return b(c,d,function(b,c){return"http://mw1.google.com/mw-planetary/lunar/lunarmaps_v1/clem_bw/"+ +c+"/"+b.x+"/"+(Math.pow(2,c)-b.y-1)+".jpg"})},Kc:new google.g.Wb(256,
256),Bc:!1,Mb:9,kh:0,Gc:1738E3,name:"Moon",rb:"Image Credit: NASA/USGS"};d.sky={yc:function(c,d){return b(c,d,function(b,c){return"http://mw1.google.com/mw-planetary/sky/skytiles_v1/"+b.x+"_"+b.y+"_"+c+".jpg"})},Kc:new google.g.Wb(256,256),Bc:!1,Mb:13,Gc:57.2957763671875,name:"Sky",rb:"Image Credit: SDSS, DSS Consortium, NASA/ESA/STScI"};d.mars_elevation={yc:function(d,e){return b(d,e,function(b,d){return c("http://mw1.google.com/mw-planetary/mars/elevation/",b,d)})},Kc:new google.g.Wb(256,256),Bc:!1,
Mb:8,Gc:3396200,name:"Mars Elevation",rb:"Image Credit: NASA/JPL/GSFC"};d.mars_visible={yc:function(d,e){return b(d,e,function(b,d){return c("http://mw1.google.com/mw-planetary/mars/visible/",b,d)})},Kc:new google.g.Wb(256,256),Bc:!1,Mb:9,Gc:3396200,name:"Mars Visible",rb:"Image Credit: NASA/JPL/ASU/MSSS"};d.mars_infrared={yc:function(d,e){return b(d,e,function(b,d){return c("http://mw1.google.com/mw-planetary/mars/infrared/",b,d)})},Kc:new google.g.Wb(256,256),Bc:!1,Mb:9,Gc:3396200,name:"Mars Infrared",
rb:"Image Credit: NASA/JPL/ASU"};var e,g=[],h={},i=document.createElement("div");i.id="credit-control";i.style.fontSize="11px";i.style.fontFamily="Arial, sans-serif";i.style.margin="0 2px 2px 0";i.style.Fj="nowrap";i.index=0;this.Zi=function(){for(var b in d)g.push(b);h={kf:g,style:google.g.$d.Sd};var c={zoom:0,S:new google.g.F(0,0),gh:{kf:g,style:google.g.$d.Sd}};e=new google.g.Zd(document.getElementById("map_canvas"),c);e.controls[google.g.Sf.Rf].push(i);for(b in d)e.hh.set(b,new google.g.Xf(d[b]));
google.g.event.ic(e,"maptypeid_changed",function(){var b=d[e.wc()].rb;i.innerHTML=b+" -"})};this.yj=function(){var b=this.nc();if(m.C)b.S=m.C.Tg(),b.fa=m.C.wc(),b.ra=m.C.Vg(),b.zoom=m.C.Ze();return b};this.bd=function(b){e=new google.g.Zd(document.getElementById("map_canvas"),b);e.controls[google.g.Sf.Rf].push(i);for(key in d)e.hh.set(key,new google.g.Xf(d[key]));google.g.event.ic(e,"maptypeid_changed",function(){if(typeof d[e.wc()]!="undefined"){var b=d[e.wc()].rb;i.innerHTML=b+" -"}});return e};
this.nc=function(){g=[google.g.X.ni,google.g.X.Ba,google.g.X.mi,google.g.X.oi];for(var b in d)g.push(b);h={kf:g,style:google.g.$d.Sd};return{backgroundColor:"#ffffff",S:new google.g.F(69.13811902334064,-32.86834716796875),He:!0,Li:!1,draggable:!0,Xi:0,$i:!0,jf:!1,gh:h,fa:"sky",Mb:f,kh:f,gj:!1,qf:!0,rf:!1,Bf:!1,Cf:!1,xj:!1,Kf:!1,ra:0,zoom:7,Qf:!1}};this.Fi=function(){var b,c=new google.g.F(60,105),d=new google.g.F(40.69847032728747,-73.9514422416687),e=new Boolean;navigator.geolocation?(e=!0,navigator.geolocation.getCurrentPosition(function(c){b=
new google.g.F(c.coords.latitude,c.coords.longitude)},function(){e==!0?(alert("Geolocation service failed."),b=d):(alert("Your browser doesn't support geolocation. We've placed you in Siberia."),b=c)})):google.gears?(e=!0,google.gears.factory.create("beta.geolocation").getCurrentPosition(function(c){b=new google.g.F(c.latitude,c.longitude)},function(){this.Vi(e)})):(e=!1,this.Wi(e));return b}}).apply(hb);var ab,$a,J;
function jb(b,c,d){var e=c,g=d*1,h=g/8+0.5|0,i=g/3+0.5|0,j=i/3+0.5|0,l=g/8+0.5|0,n=g/6+0.5|0,r=g/6+0.5|0,t=g/6+0.5|0,v=e+h,p=v+j,z=v+i,s=c=Math.PI/4,w=c,x=c,u=c,y=c,F=c,Y=c,Z=c,sa,oa,ta,Ha,Sa,Ta,Ua,Va,ua,va,wa,xa,Wa,Xa,Ya,Za;this.Dd=function(b,c){switch(b){case 0:s=Math.PI*1;w=Math.PI*0.5;x=Math.PI*(4/12);u=Math.PI*(20/12);y=Math.PI*0.75;F=Math.PI*0.75;Y=Math.PI*(1/12);Z=Math.PI*(7/12);break;case 1:s=Math.PI*0.75;w=Math.PI*0.25;x=Math.PI*(5/12);u=Math.PI*1.75;y=Math.PI*(10/12);F=Math.PI*1.25;Y=Math.PI*
0.25;Z=Math.PI*(4/12);break;case 2:s=Math.PI*0.5,w=Math.PI*0,x=Math.PI*0.75,u=Math.PI*(2/12),y=Math.PI*(5/12),F=Math.PI*(13/12),Y=Math.PI*0.5,Z=Math.PI*(7/12)}c==1&&this.Re();this.jd()};this.wj=function(b,c){this.Dd(b,c);this.Ng();this.jd()};this.fi=function(b,c){switch(b){case 0:s=Math.PI*0.75;w=Math.PI*(8/12);x=Math.PI*(4/12);u=Math.PI*(4/12);y=Math.PI*(8/12);F=Math.PI*0.75;Y=Math.PI*(4/12);Z=Math.PI*(4/12);break;case 1:s=Math.PI*(7/12);w=Math.PI*0.5;x=Math.PI*0.5;u=Math.PI*(5/12);y=Math.PI*(7/
12);F=Math.PI*(8/12);Y=Math.PI*(5/12);Z=Math.PI*0.5;break;case 2:s=Math.PI*(5/12),w=Math.PI*(4/12),x=Math.PI*(7/12),u=Math.PI*(7/12),y=Math.PI*(5/12),F=Math.PI*0.5,Y=Math.PI*(7/12),Z=Math.PI*(8/12)}c==1&&this.Re();this.jd()};this.Re=function(){s=Math.PI/2+(Math.PI/2-s);w=Math.PI/2+(Math.PI/2-w);x=Math.PI/2+(Math.PI/2-x);u=Math.PI/2+(Math.PI/2-u);y=Math.PI/2+(Math.PI/2-y);F=Math.PI/2+(Math.PI/2-F);Y=Math.PI/2+(Math.PI/2-Y);Z=Math.PI/2+(Math.PI/2-Z)};this.Ng=function(){e+=d;g=d*1;h=g/8+0.5|0;i=-i;j=
-j;l=-l;n=-n;r=-r;t=-t;v=e-h;p=v+j;z=v+i};this.jd=function(){sa=b+Math.cos(s)*l;oa=p+Math.sin(s)*l;Sa=sa+Math.cos(w)*n;Ta=oa+Math.sin(w)*n;ta=b+Math.cos(x)*l;Ha=p+Math.sin(x)*l;Ua=ta+Math.cos(u)*n;Va=oa+Math.sin(u)*n;ua=b+Math.cos(y)*r;va=z+Math.sin(y)*r;Wa=ua+Math.cos(F)*t;Xa=va+Math.sin(F)*t;wa=b+Math.cos(Y)*r;xa=z+Math.sin(Y)*r;Ya=wa+Math.cos(Z)*t;Za=xa+Math.sin(Z)*t};this.Dg=function(c){c.beginPath();c.arc(b,e,h,0,Math.PI*2,!1);c.moveTo(b,v);c.lineTo(b,v+i);c.moveTo(b,p);c.lineTo(sa,oa);c.moveTo(sa,
oa);c.lineTo(Sa,Ta);c.moveTo(b,p);c.lineTo(ta,Ha);c.moveTo(ta,Ha);c.lineTo(Ua,Va);c.moveTo(b,z);c.lineTo(ua,va);c.moveTo(ua,va);c.lineTo(Wa,Xa);c.moveTo(b,z);c.lineTo(wa,xa);c.moveTo(wa,xa);c.lineTo(Ya,Za);c.closePath()};this.Ee=this.Dd}J=new da("Citizen","000",E.w);J.me=!0;
J.ob=function(b,c,d,e,g,h,i,j,l){g<8||h<8?(l=g/4,b.lineWidth=1.5,b.beginPath(),b.arc(d+l,e+l,l,0,Math.PI*2,!1),b.closePath(),b.strokeStyle="#ccc"):(g=c.ca,c=Math.floor(c.nb/(g+1)*3),d=new jb(d,e,h),d.Ee=g>5?d.fi:d.Dd,d.Ee(c,l),d.Dg(b),b.lineWidth=1.5,b.strokeStyle="#"+i,b.lineCap="round");b.stroke();b.fillStyle="#"+i;b.fill()};
J.Ib=function(b,c,d,e,g,h,i){c=e+g/2;c=b.createRadialGradient(d,c,0,d,c,g/2);c.addColorStop(0,"rgba(255, 168, 81,1)");c.addColorStop(0.8,"#FFF354");c.addColorStop(1,"rgba(255, 168, 81,0)");b.fillStyle=c;b.fillRect(d-g/2,e,g,h);if(g<8||h<8)g/=4,b.lineWidth=2,b.beginPath(),b.arc(d+g,e+g,g,0,Math.PI*2,!1),b.closePath(),b.strokeStyle="#ccc";else{var h=g*1,j=h/8+0.5|0,l=h/3+0.5|0,n=h/8+0.5|0,r=h/6+0.5|0,g=h/6+0.5|0,h=h/6+0.5|0,t=e+j,v=t+(l/3+0.5|0),p=t+l;b.lineWidth=1;b.beginPath();var z,s,w,x,u,y,F;z=
Math.PI*(14/12);s=Math.PI*(14/12);w=Math.PI*(22/12);x=Math.PI*(22/12);u=Math.PI*(10/12);y=Math.PI*(10/12);F=Math.PI*(2/12);c=Math.PI*(2/12);b.arc(d,e,j,0,Math.PI*2,!1);b.moveTo(d,t);b.lineTo(d,t+l);b.moveTo(d,v);j=d+Math.cos(z)*n;e=v+Math.sin(z)*n;b.lineTo(j,e);b.moveTo(j,e);b.lineTo(j+Math.cos(s)*r,e+Math.sin(s)*r);b.moveTo(d,v);s=d+Math.cos(w)*n;n=v+Math.sin(w)*n;b.lineTo(s,n);b.moveTo(s,n);b.lineTo(s+Math.cos(x)*r,e+Math.sin(x)*r);b.moveTo(d,p);e=d+Math.cos(u)*g;r=p+Math.sin(u)*g;b.lineTo(e,r);
b.moveTo(e,r);b.lineTo(e+Math.cos(y)*h,r+Math.sin(y)*h);b.moveTo(d,p);d+=Math.cos(F)*g;g=p+Math.sin(F)*g;b.lineTo(d,g);b.moveTo(d,g);b.lineTo(d+Math.cos(c)*h,g+Math.sin(c)*h);b.closePath();b.strokeStyle="#"+i;b.lineCap="round"}b.stroke();b.fillStyle="#"+i;b.fill()};$a=new da("Predator","fbe53b",E.w);$a.he=!0;
$a.ob=function(b,c,d,e,g,h,i,j){c=new Image;c.src=j%4==0?"/images/agents/monster1.png":j%4==1?"/images/agents/monster2.png":j%4==2?"/images/agents/monster1.png":"/images/agents/monster3.png";b.drawImage(c,d-g/2,e-g/2,g,g)};ab=new da("Rival","3be5fb",E.w);
ab.ob=function(b,c,d,e,g,h,i,j){c=g/4;g/=2;b.beginPath();b.arc(d,e,c,0,Math.PI*2,!1);b.closePath();b.strokeStyle="#ccc";b.stroke();b.fillStyle="#"+i;b.fill();b.beginPath();b.moveTo(d,e+c);b.lineTo(d,e+c+g/2);j%2==0?(j=Math.sin(30*Math.PI/180)*g/2,h=Math.cos(30*Math.PI/180)*g/2,b.moveTo(d,e+c+g/2),b.lineTo(d-j,e+c+g/2+h),b.moveTo(d,e+c+g/2),b.lineTo(d+j,e+c+g/2+h),b.moveTo(d-g/2,e+c+g/6),b.lineTo(d+g/2,e+c+g/6)):(b.moveTo(d,e+c+g/2),b.lineTo(d,e+c+g),j=Math.sin(45*Math.PI/180)*g/2,h=Math.cos(45*Math.PI/
180)*g/2,b.moveTo(d-j,e+c+g/6+h),b.lineTo(d,e+c+g/6),b.moveTo(d+j,e+c+g/6+h),b.lineTo(d,e+c+g/6));b.closePath();b.strokeStyle="#"+i;b.lineWidth=2;b.stroke()};E.wh();
m.rj=function(){J=new da("Citizen","000",E.w);ea(J,function(b,c,d,e,g,h,i,j,l){g<8||h<8?(c=g/4,b.lineWidth=2,b.beginPath(),b.arc(d+c,e+c,c,0,Math.PI*2,!1),b.closePath(),b.strokeStyle="#ccc"):(c=g/4,b.lineWidth=1,b.beginPath(),b.arc(d,e,c,0,Math.PI*2,!1),b.closePath(),b.strokeStyle="#ccc",b.stroke(),b.fillStyle="#"+i,b.fill(),g/=2,b.beginPath(),b.moveTo(d,e-c+6),b.lineTo(d-1,e-c+6+g),j%2==1?(j=l==0?-1:1,l=l==0?-4:4,b.moveTo(d+4,e+8+2*j),b.lineTo(d-4,e+8-2*j),b.moveTo(d,e-c+6+g),b.lineTo(d+j+l,e-c+
6+g+Math.abs(l)),b.moveTo(d,e-c+5+g),b.lineTo(d-j-l/2,e-c+6+g),b.moveTo(d-j-l/2,e-c+6+g),b.lineTo(d-j-l/2,e-c+6+g+Math.abs(l)/2)):(j=l==0?1:-1,l=l==0?4:-4,b.moveTo(d+4,e+8+2*j),b.lineTo(d-4,e+8-2*j),b.moveTo(d,e-c+6+g),b.lineTo(d+l,e-c+6+g+Math.abs(l)),b.moveTo(d,e-c+6+g),b.lineTo(d-l/2,e-c+6+g+Math.abs(l)/2),b.moveTo(d-l/2,e-c+6+g+Math.abs(l)/2),b.lineTo(d-l,e-c+6+g)),b.closePath(),b.strokeStyle="#"+i);b.stroke();b.fillStyle="#"+i;b.fill()});$a=new da("Predator","fbe53b",E.w);ea($a,function(b,c,
d,e,g,h,i,j){c=new Image;c.src=j%4==0?"/images/agents/monster1.png":j%4==1?"/images/agents/monster2.png":j%4==2?"/images/agents/monster1.png":"/images/agents/monster3.png";b.drawImage(c,d-g/2,e-g/2,g,g)});ab=new da("Rival","3be5fb",E.w);ea(ab,function(b,c,d,e,g,h,i,j){c=g/4;g/=2;b.beginPath();b.arc(d,e,c,0,Math.PI*2,!1);b.closePath();b.strokeStyle="#ccc";b.stroke();b.fillStyle="#"+i;b.fill();b.beginPath();b.moveTo(d,e+c);b.lineTo(d,e+c+g/2);j%2==0?(j=Math.sin(30*Math.PI/180)*g/2,h=Math.cos(30*Math.PI/
180)*g/2,b.moveTo(d,e+c+g/2),b.lineTo(d-j,e+c+g/2+h),b.moveTo(d,e+c+g/2),b.lineTo(d+j,e+c+g/2+h),b.moveTo(d-g/2,e+c+g/6),b.lineTo(d+g/2,e+c+g/6)):(b.moveTo(d,e+c+g/2),b.lineTo(d,e+c+g),j=Math.sin(45*Math.PI/180)*g/2,h=Math.cos(45*Math.PI/180)*g/2,b.moveTo(d-j,e+c+g/6+h),b.lineTo(d,e+c+g/6),b.moveTo(d+j,e+c+g/6+h),b.lineTo(d,e+c+g/6));b.closePath();b.strokeStyle="#"+i;b.lineWidth=2;b.stroke()})};m=m||{};m.hj=new gb("Novice",0);m.Cj=new gb("Team Leader",200);m.mj=new gb("Planner",500);m=m||{};m.qh=function(){alert("Not yet implemented")};m.Vh=function(){var b="";b+=m.ma(M);b+=m.ma(N);b+=m.ma(O);b+=m.ma(P);b+=m.ma(Q);b+=m.ma(R);b+=m.ma(S);b+=m.ma(T);b+=m.ma(U);b+=m.ma(V);b+=m.ma(W);b+=m.ma(X);var c=window.open("","RecipeWindow","width=600,height=600"),b='<html><head><title>FiercePlanet Storyboard</title></head><body><div id="storyboard">'+$("<div />").append(Qa($(b))).oa()+"</div></body></html>";c.document.open();c.document.write(b);c.document.close();return!1};
m.ma=function(b){var c="";b.getName()&&(c+="<h3>"+b.getName()+"</h3>");c+="<div>Level ID: "+b.m+"</div>";c+="<div>Initial number of agents: "+b.G+"</div>";c+="<div>Number of waves: "+b.u+"</div>";c+="<div>Expiry limit: "+b.J+"</div>";c+="<div>Initial resource store: "+b.ka+"</div>";b.$&&(c+="<h4>Level Image</h4>",c+='<img src="'+b.$+'" alt="City Image" width="460" height="140">');b.H&&(c+="<h4>Introduction</h4>",c+=b.H);b.R&&(c+="<h4>Tip</h4>",c+=b.R.Tc);b.Ka&&(c+="<h4>Catastrohe</h4>",c+=b.Ka.Rc.Tc);
b.Y&&(c+="<h4>Conclusion</h4>",c+=b.Y);c+="<hr/>";return c};var ib=10,M=new q(0);M.K=!0;C(M,0,0);D(M,4,4);M.l=5;M.B=5;M.G=1;M.u=3;M.J=20;M.Q("Tutorial");M.H="<p>The citizens of Fierce Planet are in danger of extinction. Their cities have been destroyed &mdash; there is a shortage of food and water, law and order has broken down, and disease is rampant.</p><p>The aim of the game is to help citizens survive as they build a sustainable city. Their start point is marked by a green circle, and the goal by a white circle. Both circles reflect your progress as more waves of citizens come through.</p> <p>You can save your citizens by placing <em>resources</em> on tiles around their path. You can click on tiles to select a resource, or drag resources from the panel on the right onto the game map.</p> <p>Resources come in three kinds: economic, environmental and social. Your citizens need all of these to build a sustainable city. If you don't provide enough resources of a particular kind, your citizens will start turning that colour. This indicates you need to put down some resources of that colour to help your citizens.</p> <p>You start with a limited amount of resources. Saving citizens will allow you to place more resources, which will allow you to help others.</p> <p>Begin by placing some resources on the map. When you are ready, click the 'Play' button in the Control Panel on the left. After a few seconds, citizens will start marching towards their goal.</p> ";
M.Y="Well done - you have completed the tutorial. Now time to help your citizens on Level 1.";M.ha=function(){A(this);B(this,20,5);B(this,15,1);B(this,10,5);B(this,9,1);B(this,0,5)};var N=new q(1);N.K=!0;C(N,0,9);D(N,10,1);N.l=11;N.B=11;N.G=1;N.u=10;N.J=20;N.Q("Level 1: Welcome to Fierce Planet!");N.H="<p>The citizens of Fierce Planet are in danger of extinction. Their cities have been destroyed &mdash; there is a shortage of food and water, law and order has broken down, and disease is rampant.</p><p>Help your citizens rebuild their world before they are wiped out!</p>";
N.Y="<p>Congratulations, you have helped the citizens of Fierce Planet start rebuilding their world... there is still a long way to go!</p>";N.R=new o("Drag or click the resources on the right (->), then add them to the map.",m.q-m.Mc,m.r/2);N.la="http://db.tt/iFLVJKi";N.ha=function(){A(this);B(this,99,10);B(this,97,1);B(this,78,9);B(this,67,1);B(this,56,9);B(this,53,1);B(this,34,9);B(this,23,1);B(this,12,10);this.ne=[new ha($a,0,9)];this.Wc=[new ha(ab,10,1)]};var O=new q(2);O.K=!0;C(O,0,0);
D(O,11,1);O.l=12;O.B=12;O.G=1;O.u=10;O.J=10;O.ka=120;O.Q("Level 2: Twists and Turns");O.H="<p>The citizens of Fierce Planet are slowly building their city. With your help they can make it a place of peace and prosperity.</p>";O.Y="<p>Well done, you have completed level 2. The hard work must continue...</p>";O.R=new o("You can pause at any time to add resources. You can place more resources as you save citizens.",0,0);O.la="http://db.tt/Tyd9F6M";
O.ha=function(){A(this);B(this,121,10);B(this,118,1);B(this,109,1);B(this,102,5);B(this,97,4);B(this,90,1);B(this,88,1);B(this,78,5);B(this,73,4);B(this,70,1);B(this,61,1);B(this,54,5);B(this,49,4);B(this,42,1);B(this,40,1);B(this,32,3);B(this,30,1);B(this,25,4);B(this,22,2);B(this,18,3);B(this,13,1);B(this,0,2)};var P=new q(3);P.K=!0;C(P,5,12);D(P,3,3);P.l=13;P.B=13;P.G=1;P.u=10;P.J=10;P.ka=150;P.Q("Level 3: Waves of Uncertainty");P.H="<p>The rebuilding of Fierce Planet is proceeding well... but how can you plan for a random act of nature??!!! </p>";
P.Y="<p>Phew - that was a rush! Perhaps the citizens will need to head inland for a while.</p>";P.R=new o("The levels get progressively larger, requiring more planning as to where you allocate resources. Aim to place resources at regular intervals along the path.");P.la="http://db.tt/7KPJ8Xi";P.Ka=new ya(I.Ia,1E3+Math.random()*1E3,250,0.8,new o("A tsumani will soon hit the city - some of its resources will be depleted.",a,a,500,250,a,a,I.Ia.t,"000000"));
P.ha=function(){A(this);B(this,161,1);B(this,150,5);B(this,148,1);B(this,144,3);B(this,141,1);B(this,137,1);B(this,135,1);B(this,133,1);B(this,131,1);B(this,126,3);B(this,124,1);B(this,122,1);B(this,120,1);B(this,118,1);B(this,113,1);B(this,111,1);B(this,109,1);B(this,107,1);B(this,105,1);B(this,100,3);B(this,96,3);B(this,94,1);B(this,92,1);B(this,89,1);B(this,81,1);B(this,79,1);B(this,68,9);B(this,66,1);B(this,53,1);B(this,42,9);B(this,40,1);B(this,37,1);B(this,27,1);B(this,14,11)};var Q=new q(4);
Q.K=!0;C(Q,6,6);D(Q,0,0);Q.l=14;Q.B=14;Q.G=1;Q.u=10;Q.J=10;Q.ka=180;Q.Q("Level 4: Spiral of Doom");Q.H="<p>The only way out is via the long and winding road...</p>";Q.R=new o("Be sure to allocate resources to the outer reaches of the path. Citizens will run faster when there is less to go around...");Q.la="http://db.tt/9m8kuIs";Q.Y="Your citizens are feeling dizzy! But thankfully they have survived!";
Q.ha=function(){A(this);B(this,168,13);B(this,166,1);B(this,154,1);B(this,152,1);B(this,142,9);B(this,140,1);B(this,138,1);B(this,136,1);B(this,128,1);B(this,126,1);B(this,124,1);B(this,122,1);B(this,116,5);B(this,114,1);B(this,112,1);B(this,110,1);B(this,108,1);B(this,106,1);B(this,102,1);B(this,100,1);B(this,98,1);B(this,96,1);B(this,94,1);B(this,92,1);B(this,90,1);B(this,88,1);B(this,86,1);B(this,84,1);B(this,82,1);B(this,80,1);B(this,76,3);B(this,74,1);B(this,72,1);B(this,70,1);B(this,68,1);B(this,
66,1);B(this,60,1);B(this,58,1);B(this,56,1);B(this,54,1);B(this,46,7);B(this,44,1);B(this,42,1);B(this,40,1);B(this,30,1);B(this,28,1);B(this,16,11);B(this,14,1);B(this,0,1)};var R=new q(5);R.K=!0;C(R,13,0);D(R,0,1);R.l=15;R.B=15;R.G=1;R.u=10;R.J=10;R.ka=200;R.Q("Level 5: A-mazing Grace");R.H="<p>The citizens are hopeful that the promised land lies not too far ahead. Or does it?</p>";R.R=new o("Citizens are (sort of) smart - at forks in the road, they'll take the path which appears more plentiful. Place resources to help them choose the right path.");
R.la="http://db.tt/DIi4CW0";R.Y="That really was a-mazing! Time to straighten things out...";
R.ha=function(){A(this);B(this,208,1);B(this,204,3);B(this,196,7);B(this,193,1);B(this,191,1);B(this,189,1);B(this,187,1);B(this,183,1);B(this,178,1);B(this,176,1);B(this,174,1);B(this,172,1);B(this,170,1);B(this,166,3);B(this,163,1);B(this,161,1);B(this,159,1);B(this,157,1);B(this,155,1);B(this,151,1);B(this,148,1);B(this,146,1);B(this,144,1);B(this,142,1);B(this,140,1);B(this,138,1);B(this,136,1);B(this,131,3);B(this,129,1);B(this,127,1);B(this,125,1);B(this,123,1);B(this,121,1);B(this,118,1);B(this,
114,1);B(this,112,1);B(this,110,1);B(this,108,1);B(this,106,1);B(this,103,1);B(this,99,3);B(this,95,3);B(this,91,3);B(this,88,1);B(this,86,1);B(this,80,1);B(this,78,1);B(this,76,1);B(this,73,1);B(this,71,1);B(this,67,3);B(this,65,1);B(this,63,1);B(this,61,1);B(this,58,1);B(this,56,1);B(this,54,1);B(this,52,1);B(this,50,1);B(this,48,1);B(this,46,1);B(this,43,1);B(this,41,1);B(this,39,1);B(this,37,1);B(this,35,1);B(this,33,1);B(this,28,1);B(this,24,3);B(this,20,3);B(this,15,4);B(this,13,1)};var S=new q(6);
S.K=!0;C(S,0,1);D(S,2,14);S.l=16;S.B=16;S.G=1;S.u=10;S.J=10;S.Zb=!0;S.ka=350;S.Q("Level 6: Dire Straits");S.H="<p>This level looks well resourced &mdash; but there are troubling signs ahead for the economy. your citizens are going to need all the help they can get... </p>";S.R=new o("Clicking on an existing resource allows you to delete it, and give you back some of what you spent");S.Y="Back in surplus! Your citizens were able to pull through. Can they continue to work together through the challenges that lie ahead?";
S.la="http://db.tt/gre8MPS";S.Ka=new ya(I.Ha,500+Math.random()*500,250,0.75,new o("The city is suffering a financial crisis - many services will be temporarily discontinued...",a,a,500,250,a,a,I.Ha.t));S.ha=function(){A(this);B(this,226,1);B(this,212,12);B(this,208,3);B(this,196,1);B(this,182,10);B(this,176,5);B(this,166,1);B(this,152,8);B(this,144,7);B(this,136,1);B(this,122,6);B(this,112,9);B(this,106,1);B(this,92,4);B(this,80,11);B(this,76,1);B(this,62,2);B(this,48,13);B(this,46,1);B(this,16,15)};
var T=new q(7);T.K=!0;T.l=17;T.B=17;C(T,0,8);D(T,16,8);T.G=1;T.u=10;T.J=10;T.$b=!0;T.ka=200;T.Q("Level 7: Like, Totally Random...");T.H="<p>Ahead lies a vast and empty expanse. Your citizens are understandably nervous. Left unaided, they will try not to backtrack, but could find themselves hopelessly lost.</p>";T.R=new o("You can add resources to the paths (the white squares) on this level, to direct citizens to their goal.");T.Y="Spaced out! Time to move back to the (apparent) comforts of the city.";
T.la="http://db.tt/7SRv0qP";T.ha=function(){A(this);B(this,280,1);B(this,262,3);B(this,244,5);B(this,226,7);B(this,208,9);B(this,190,11);B(this,172,13);B(this,154,15);B(this,136,17);B(this,120,15);B(this,104,13);B(this,88,11);B(this,72,9);B(this,56,7);B(this,40,5);B(this,24,3);B(this,8,1)};var U=new q(8);U.K=!0;C(U,0,0);D(U,17,17);U.l=18;U.B=18;U.G=1;U.u=10;U.J=10;U.ka=300;U.Q("Level 8: A Fork (or Two) in the Road");U.H="<p>Life for the citizens of Fierce Planet is never simple. They are now faced with difficult dilemmas about which way to turn.</p>";
U.R=new o("You'll need to direct citizen through numerous forks in the road, by strategic placement of resources along the path.");U.Y="Un-fork-ettable! After all that running around, time for a refreshing break...";U.la="http://db.tt/0ynKmXS";
U.ha=function(){A(this);B(this,322,2);B(this,289,16);B(this,286,1);B(this,271,1);B(this,255,14);B(this,253,1);B(this,250,1);B(this,248,1);B(this,246,1);B(this,237,1);B(this,235,1);B(this,232,1);B(this,230,1);B(this,221,8);B(this,219,1);B(this,217,1);B(this,214,1);B(this,212,1);B(this,210,1);B(this,203,1);B(this,201,1);B(this,199,1);B(this,196,1);B(this,194,1);B(this,187,6);B(this,185,1);B(this,183,1);B(this,181,1);B(this,178,1);B(this,176,1);B(this,174,1);B(this,172,1);B(this,169,1);B(this,167,1);
B(this,165,1);B(this,163,1);B(this,160,1);B(this,158,1);B(this,156,1);B(this,154,1);B(this,151,1);B(this,149,1);B(this,147,1);B(this,145,1);B(this,142,1);B(this,140,1);B(this,138,1);B(this,131,6);B(this,129,1);B(this,127,1);B(this,124,1);B(this,122,1);B(this,120,1);B(this,113,1);B(this,111,1);B(this,109,1);B(this,106,1);B(this,104,1);B(this,95,8);B(this,93,1);B(this,91,1);B(this,88,1);B(this,86,1);B(this,77,1);B(this,75,1);B(this,73,1);B(this,70,1);B(this,55,14);B(this,52,1);B(this,37,1);B(this,19,
16);B(this,0,2)};var V=new q(9);V.K=!0;C(V,9,0);D(V,9,18);V.l=19;V.B=19;V.G=1;V.u=10;V.J=10;V.ka=280;V.Q("Level 9: Cascades");V.H="<p>Time is running out. But the citizens of Fierce Planet still need some rest and relaxation. Doesn't a trip to the beach sound like a good idea?</p>";V.R=new o("No tip! You've gotten this far...");V.Y="This seaside journey nearly brought about their downfall! Now time for the final stretch...";V.la="http://db.tt/LMyYRtH";
V.ha=function(){A(this);B(this,351,1);B(this,330,5);B(this,311,1);B(this,296,3);B(this,294,1);B(this,290,3);B(this,279,1);B(this,275,1);B(this,271,1);B(this,260,3);B(this,254,5);B(this,250,3);B(this,243,1);B(this,239,1);B(this,235,1);B(this,231,1);B(this,224,3);B(this,214,9);B(this,210,3);B(this,207,1);B(this,203,1);B(this,195,1);B(this,191,1);B(this,182,7);B(this,178,1);B(this,172,5);B(this,163,1);B(this,159,1);B(this,144,3);B(this,138,3);B(this,127,1);B(this,125,1);B(this,121,1);B(this,119,1);B(this,
108,3);B(this,106,1);B(this,102,1);B(this,98,3);B(this,91,1);B(this,87,1);B(this,83,1);B(this,79,1);B(this,72,3);B(this,62,9);B(this,58,3);B(this,55,1);B(this,39,1);B(this,20,17);B(this,9,1)};var W=new q(10);W.K=!0;C(W,18,19);D(W,16,19);W.l=20;W.B=20;W.G=1;W.u=5;W.J=1;W.ka=500;W.Q("Level 10: Fields of Ma(i)ze");W.H="<p>Pastures of plenty and a new sustainable future lie in store for the citizens of Fierce Planet. </p><p>With few remaining resources, they are starting to fight among themselves. Can they withstand a revolution from within?</p>";
W.R=new o("Remember to resource dead end paths, or your citizens will fade away, dazed and confused...");W.la="http://db.tt/DIi4CW0";W.Ka=new ya(I.Ja,500+Math.random()*100,250,0.6,new o("Oh no! A revolution is coming...",a,a,500,250,a,a,I.Ja.t));
W.ha=function(){A(this);B(this,398,1);B(this,396,1);B(this,378,1);B(this,361,16);B(this,358,1);B(this,356,1);B(this,345,1);B(this,341,1);B(this,338,1);B(this,334,3);B(this,325,8);B(this,323,1);B(this,321,1);B(this,318,1);B(this,312,1);B(this,305,1);B(this,303,1);B(this,301,1);B(this,298,1);B(this,292,5);B(this,287,4);B(this,285,1);B(this,281,3);B(this,278,1);B(this,267,1);B(this,265,1);B(this,247,12);B(this,241,5);B(this,238,1);B(this,221,1);B(this,218,1);B(this,215,1);B(this,211,3);B(this,207,3);
B(this,205,1);B(this,203,1);B(this,201,1);B(this,195,4);B(this,193,1);B(this,189,3);B(this,183,5);B(this,181,1);B(this,178,1);B(this,173,1);B(this,164,1);B(this,161,1);B(this,158,1);B(this,153,4);B(this,146,6);B(this,141,4);B(this,138,1);B(this,136,1);B(this,131,1);B(this,126,1);B(this,118,1);B(this,114,3);B(this,108,5);B(this,106,1);B(this,101,4);B(this,98,1);B(this,94,1);B(this,91,1);B(this,88,1);B(this,86,1);B(this,84,1);B(this,81,1);B(this,78,1);B(this,76,1);B(this,71,4);B(this,68,2);B(this,63,
4);B(this,61,1);B(this,58,1);B(this,56,1);B(this,41,1);B(this,21,18)};var X=new q(11);X.K=!0;C(X,11,12);C(X,18,12);D(X,12,17);D(X,17,7);X.l=30;X.B=25;X.G=4;X.u=3;X.J=10;X.ka=3E3;X.Zb=!0;X.Q("Level 11: It's a Mad World");X.H="<p>The citizens are safe! There's no mad rush &mdash; time to sit back and watch the world go by....";X.R=new o("'There is a place. Like no place on Earth. A land full of wonder, mystery, and danger! Some say to survive it: You need to be as mad as a hatter. ' (The Mad Hatter)");
X.ha=function(){this.n=$.Lg('[{"_color":"0FFF1F","x":0,"_y":0},null,{"_color":"0FFF1F","x":2,"_y":0},{"_color":"0FFF1F","x":3,"_y":0},{"_color":"0FFF1F","x":4,"_y":0},{"_color":"0FFF1F","x":5,"_y":0},{"_color":"0FFF1F","x":6,"_y":0},{"_color":"0FFF1F","x":7,"_y":0},{"_color":"0FFF1F","x":8,"_y":0},{"_color":"0FFF1F","x":9,"_y":0},{"_color":"0FFF1F","x":10,"_y":0},{"_color":"0FFF1F","x":11,"_y":0},{"_color":"0FFF1F","x":12,"_y":0},{"_color":"0FFF1F","x":13,"_y":0},{"_color":"0FFF1F","x":14,"_y":0},{"_color":"0FFF1F","x":15,"_y":0},{"_color":"0FFF1F","x":16,"_y":0},{"_color":"0FFF1F","x":17,"_y":0},{"_color":"0FFF1F","x":18,"_y":0},{"_color":"0FFF1F","x":19,"_y":0},{"_color":"0FFF1F","x":20,"_y":0},{"_color":"0FFF1F","x":21,"_y":0},{"_color":"0FFF1F","x":22,"_y":0},{"_color":"0FFF1F","x":23,"_y":0},{"_color":"0FFF1F","x":24,"_y":0},{"_color":"0FFF1F","x":25,"_y":0},{"_color":"0FFF1F","x":26,"_y":0},{"_color":"0FFF1F","x":27,"_y":0},null,{"_color":"0FFF1F","x":29,"_y":0},null,null,null,{"_color":"0FFF1F","x":3,"_y":1},{"_color":"0FFF1F","x":4,"_y":1},{"_color":"0FFF1F","x":5,"_y":1},null,null,null,{"_color":"0FFF1F","x":9,"_y":1},{"_color":"0FFF1F","x":10,"_y":1},{"_color":"0FFF1F","x":11,"_y":1},null,null,null,{"_color":"0FFF1F","x":15,"_y":1},{"_color":"0FFF1F","x":16,"_y":1},{"_color":"0FFF1F","x":17,"_y":1},{"_color":"0FFF1F","x":18,"_y":1},{"_color":"0FFF1F","x":19,"_y":1},null,null,null,{"_color":"0FFF1F","x":23,"_y":1},{"_color":"0FFF1F","x":24,"_y":1},{"_color":"0FFF1F","x":25,"_y":1},{"_color":"0FFF1F","x":26,"_y":1},{"_color":"0FFF1F","x":27,"_y":1},null,null,{"_color":"0FFF1F","x":0,"_y":2},{"_color":"0FFF1F","x":1,"_y":2},null,null,{"_color":"0FFF1F","x":4,"_y":2},null,null,{"_color":"0FFF1F","x":7,"_y":2},null,null,{"_color":"0FFF1F","x":10,"_y":2},null,null,{"_color":"0FFF1F","x":13,"_y":2},null,null,{"_color":"0FFF1F","x":16,"_y":2},{"_color":"0FFF1F","x":17,"_y":2},{"_color":"0FFF1F","x":18,"_y":2},null,null,{"_color":"0FFF1F","x":21,"_y":2},null,null,{"_color":"0FFF1F","x":24,"_y":2},{"_color":"0FFF1F","x":25,"_y":2},{"_color":"0FFF1F","x":26,"_y":2},null,null,{"_color":"0FFF1F","x":29,"_y":2},{"_color":"0FFF1F","x":0,"_y":3},{"_color":"0FFF1F","x":1,"_y":3},{"_color":"0FFF1F","x":2,"_y":3},null,null,null,{"_color":"0FFF1F","x":6,"_y":3},{"_color":"0FFF1F","x":7,"_y":3},{"_color":"0FFF1F","x":8,"_y":3},null,null,null,{"_color":"0FFF1F","x":12,"_y":3},{"_color":"0FFF1F","x":13,"_y":3},{"_color":"0FFF1F","x":14,"_y":3},null,{"_color":"0FFF1F","x":16,"_y":3},{"_color":"0FFF1F","x":17,"_y":3},null,null,{"_color":"0FFF1F","x":20,"_y":3},{"_color":"0FFF1F","x":21,"_y":3},{"_color":"0FFF1F","x":22,"_y":3},null,null,{"_color":"0FFF1F","x":25,"_y":3},null,null,{"_color":"0FFF1F","x":28,"_y":3},{"_color":"0FFF1F","x":29,"_y":3},{"_color":"0FFF1F","x":0,"_y":4},{"_color":"0FFF1F","x":1,"_y":4},{"_color":"0FFF1F","x":2,"_y":4},{"_color":"0FFF1F","x":3,"_y":4},null,{"_color":"0FFF1F","x":5,"_y":4},{"_color":"0FFF1F","x":6,"_y":4},{"_color":"0FFF1F","x":7,"_y":4},{"_color":"0FFF1F","x":8,"_y":4},{"_color":"0FFF1F","x":9,"_y":4},null,{"_color":"0FFF1F","x":11,"_y":4},{"_color":"0FFF1F","x":12,"_y":4},{"_color":"0FFF1F","x":13,"_y":4},null,null,null,{"_color":"0FFF1F","x":17,"_y":4},{"_color":"0FFF1F","x":18,"_y":4},{"_color":"0FFF1F","x":19,"_y":4},{"_color":"0FFF1F","x":20,"_y":4},{"_color":"0FFF1F","x":21,"_y":4},{"_color":"0FFF1F","x":22,"_y":4},{"_color":"0FFF1F","x":23,"_y":4},null,null,null,{"_color":"0FFF1F","x":27,"_y":4},{"_color":"0FFF1F","x":28,"_y":4},{"_color":"0FFF1F","x":29,"_y":4},{"_color":"0FFF1F","x":0,"_y":5},{"_color":"0FFF1F","x":1,"_y":5},{"_color":"0FFF1F","x":2,"_y":5},null,null,null,{"_color":"0FFF1F","x":6,"_y":5},{"_color":"0FFF1F","x":7,"_y":5},{"_color":"0FFF1F","x":8,"_y":5},null,null,null,{"_color":"0FFF1F","x":12,"_y":5},{"_color":"0FFF1F","x":13,"_y":5},{"_color":"0FFF1F","x":14,"_y":5},{"_color":"0FFF1F","x":15,"_y":5},{"_color":"0FFF1F","x":16,"_y":5},{"_color":"0FFF1F","x":17,"_y":5},{"_color":"0FFF1F","x":18,"_y":5},null,null,null,{"_color":"0FFF1F","x":22,"_y":5},{"_color":"0FFF1F","x":23,"_y":5},null,{"_color":"0FFF1F","x":25,"_y":5},null,null,{"_color":"0FFF1F","x":28,"_y":5},{"_color":"0FFF1F","x":29,"_y":5},{"_color":"0FFF1F","x":0,"_y":6},{"_color":"0FFF1F","x":1,"_y":6},null,null,{"_color":"0FFF1F","x":4,"_y":6},{"_color":"0FFF1F","x":5,"_y":6},{"_color":"0FFF1F","x":6,"_y":6},null,{"_color":"0FFF1F","x":8,"_y":6},{"_color":"0FFF1F","x":9,"_y":6},{"_color":"0FFF1F","x":10,"_y":6},{"_color":"0FFF1F","x":11,"_y":6},{"_color":"0FFF1F","x":12,"_y":6},{"_color":"0FFF1F","x":13,"_y":6},null,null,{"_color":"0FFF1F","x":16,"_y":6},{"_color":"0FFF1F","x":17,"_y":6},null,null,{"_color":"0FFF1F","x":20,"_y":6},null,null,{"_color":"0FFF1F","x":23,"_y":6},{"_color":"0FFF1F","x":24,"_y":6},{"_color":"0FFF1F","x":25,"_y":6},{"_color":"0FFF1F","x":26,"_y":6},null,null,{"_color":"0FFF1F","x":29,"_y":6},{"_color":"0FFF1F","x":0,"_y":7},null,null,{"_color":"0FFF1F","x":3,"_y":7},{"_color":"0FFF1F","x":4,"_y":7},{"_color":"0FFF1F","x":5,"_y":7},{"_color":"0FFF1F","x":6,"_y":7},null,null,null,{"_color":"0FFF1F","x":10,"_y":7},null,null,null,null,{"_color":"0FFF1F","x":15,"_y":7},{"_color":"0FFF1F","x":16,"_y":7},null,null,{"_color":"0FFF1F","x":19,"_y":7},{"_color":"0FFF1F","x":20,"_y":7},{"_color":"0FFF1F","x":21,"_y":7},null,null,null,{"_color":"0FFF1F","x":25,"_y":7},{"_color":"0FFF1F","x":26,"_y":7},{"_color":"0FFF1F","x":27,"_y":7},null,{"_color":"0FFF1F","x":29,"_y":7},{"_color":"0FFF1F","x":0,"_y":8},null,{"_color":"0FFF1F","x":2,"_y":8},{"_color":"0FFF1F","x":3,"_y":8},null,null,{"_color":"0FFF1F","x":6,"_y":8},{"_color":"0FFF1F","x":7,"_y":8},null,{"_color":"0FFF1F","x":9,"_y":8},{"_color":"0FFF1F","x":10,"_y":8},{"_color":"0FFF1F","x":11,"_y":8},null,{"_color":"0FFF1F","x":13,"_y":8},null,null,{"_color":"0FFF1F","x":16,"_y":8},{"_color":"0FFF1F","x":17,"_y":8},{"_color":"0FFF1F","x":18,"_y":8},{"_color":"0FFF1F","x":19,"_y":8},{"_color":"0FFF1F","x":20,"_y":8},{"_color":"0FFF1F","x":21,"_y":8},{"_color":"0FFF1F","x":22,"_y":8},null,{"_color":"0FFF1F","x":24,"_y":8},{"_color":"0FFF1F","x":25,"_y":8},{"_color":"0FFF1F","x":26,"_y":8},null,null,{"_color":"0FFF1F","x":29,"_y":8},{"_color":"0FFF1F","x":0,"_y":9},null,null,{"_color":"0FFF1F","x":3,"_y":9},{"_color":"0FFF1F","x":4,"_y":9},null,null,null,null,{"_color":"0FFF1F","x":9,"_y":9},{"_color":"0FFF1F","x":10,"_y":9},null,null,{"_color":"0FFF1F","x":13,"_y":9},{"_color":"0FFF1F","x":14,"_y":9},null,{"_color":"0FFF1F","x":16,"_y":9},{"_color":"0FFF1F","x":17,"_y":9},null,null,null,{"_color":"0FFF1F","x":21,"_y":9},{"_color":"0FFF1F","x":22,"_y":9},null,null,{"_color":"0FFF1F","x":25,"_y":9},null,null,{"_color":"0FFF1F","x":28,"_y":9},{"_color":"0FFF1F","x":29,"_y":9},{"_color":"0FFF1F","x":0,"_y":10},{"_color":"0FFF1F","x":1,"_y":10},null,null,{"_color":"0FFF1F","x":4,"_y":10},{"_color":"0FFF1F","x":5,"_y":10},null,{"_color":"0FFF1F","x":7,"_y":10},null,null,null,null,{"_color":"0FFF1F","x":12,"_y":10},{"_color":"0FFF1F","x":13,"_y":10},null,null,{"_color":"0FFF1F","x":16,"_y":10},null,null,{"_color":"0FFF1F","x":19,"_y":10},null,null,{"_color":"0FFF1F","x":22,"_y":10},{"_color":"0FFF1F","x":23,"_y":10},null,null,null,{"_color":"0FFF1F","x":27,"_y":10},{"_color":"0FFF1F","x":28,"_y":10},{"_color":"0FFF1F","x":29,"_y":10},{"_color":"0FFF1F","x":0,"_y":11},{"_color":"0FFF1F","x":1,"_y":11},{"_color":"0FFF1F","x":2,"_y":11},null,null,null,null,{"_color":"0FFF1F","x":7,"_y":11},{"_color":"0FFF1F","x":8,"_y":11},{"_color":"0FFF1F","x":9,"_y":11},{"_color":"0FFF1F","x":10,"_y":11},{"_color":"0FFF1F","x":11,"_y":11},{"_color":"0FFF1F","x":12,"_y":11},{"_color":"0FFF1F","x":13,"_y":11},null,{"_color":"0FFF1F","x":15,"_y":11},{"_color":"0FFF1F","x":16,"_y":11},null,{"_color":"0FFF1F","x":18,"_y":11},{"_color":"0FFF1F","x":19,"_y":11},{"_color":"0FFF1F","x":20,"_y":11},null,null,{"_color":"0FFF1F","x":23,"_y":11},{"_color":"0FFF1F","x":24,"_y":11},{"_color":"0FFF1F","x":25,"_y":11},null,null,null,{"_color":"0FFF1F","x":29,"_y":11},{"_color":"0FFF1F","x":0,"_y":12},null,{"_color":"0FFF1F","x":2,"_y":12},{"_color":"0FFF1F","x":3,"_y":12},{"_color":"0FFF1F","x":4,"_y":12},{"_color":"0FFF1F","x":5,"_y":12},null,null,{"_color":"0FFF1F","x":8,"_y":12},{"_color":"0FFF1F","x":9,"_y":12},{"_color":"0FFF1F","x":10,"_y":12},null,null,{"_color":"0FFF1F","x":13,"_y":12},null,null,{"_color":"0FFF1F","x":16,"_y":12},null,null,{"_color":"0FFF1F","x":19,"_y":12},{"_color":"0FFF1F","x":20,"_y":12},{"_color":"0FFF1F","x":21,"_y":12},null,null,{"_color":"0FFF1F","x":24,"_y":12},{"_color":"0FFF1F","x":25,"_y":12},{"_color":"0FFF1F","x":26,"_y":12},{"_color":"0FFF1F","x":27,"_y":12},{"_color":"0FFF1F","x":28,"_y":12},{"_color":"0FFF1F","x":29,"_y":12},{"_color":"0FFF1F","x":0,"_y":13},null,null,null,{"_color":"0FFF1F","x":4,"_y":13},{"_color":"0FFF1F","x":5,"_y":13},{"_color":"0FFF1F","x":6,"_y":13},null,null,{"_color":"0FFF1F","x":9,"_y":13},{"_color":"0FFF1F","x":10,"_y":13},{"_color":"0FFF1F","x":11,"_y":13},null,{"_color":"0FFF1F","x":13,"_y":13},{"_color":"0FFF1F","x":14,"_y":13},null,{"_color":"0FFF1F","x":16,"_y":13},{"_color":"0FFF1F","x":17,"_y":13},{"_color":"0FFF1F","x":18,"_y":13},{"_color":"0FFF1F","x":19,"_y":13},{"_color":"0FFF1F","x":20,"_y":13},{"_color":"0FFF1F","x":21,"_y":13},{"_color":"0FFF1F","x":22,"_y":13},null,null,null,null,{"_color":"0FFF1F","x":27,"_y":13},{"_color":"0FFF1F","x":28,"_y":13},{"_color":"0FFF1F","x":29,"_y":13},{"_color":"0FFF1F","x":0,"_y":14},{"_color":"0FFF1F","x":1,"_y":14},{"_color":"0FFF1F","x":2,"_y":14},null,null,null,{"_color":"0FFF1F","x":6,"_y":14},{"_color":"0FFF1F","x":7,"_y":14},null,null,{"_color":"0FFF1F","x":10,"_y":14},null,null,{"_color":"0FFF1F","x":13,"_y":14},null,null,{"_color":"0FFF1F","x":16,"_y":14},{"_color":"0FFF1F","x":17,"_y":14},null,null,null,null,{"_color":"0FFF1F","x":22,"_y":14},null,{"_color":"0FFF1F","x":24,"_y":14},{"_color":"0FFF1F","x":25,"_y":14},null,null,{"_color":"0FFF1F","x":28,"_y":14},{"_color":"0FFF1F","x":29,"_y":14},{"_color":"0FFF1F","x":0,"_y":15},{"_color":"0FFF1F","x":1,"_y":15},null,null,{"_color":"0FFF1F","x":4,"_y":15},null,null,{"_color":"0FFF1F","x":7,"_y":15},{"_color":"0FFF1F","x":8,"_y":15},null,null,null,{"_color":"0FFF1F","x":12,"_y":15},{"_color":"0FFF1F","x":13,"_y":15},null,{"_color":"0FFF1F","x":15,"_y":15},{"_color":"0FFF1F","x":16,"_y":15},null,null,{"_color":"0FFF1F","x":19,"_y":15},{"_color":"0FFF1F","x":20,"_y":15},null,null,null,null,{"_color":"0FFF1F","x":25,"_y":15},{"_color":"0FFF1F","x":26,"_y":15},null,null,{"_color":"0FFF1F","x":29,"_y":15},{"_color":"0FFF1F","x":0,"_y":16},null,null,{"_color":"0FFF1F","x":3,"_y":16},{"_color":"0FFF1F","x":4,"_y":16},{"_color":"0FFF1F","x":5,"_y":16},null,{"_color":"0FFF1F","x":7,"_y":16},{"_color":"0FFF1F","x":8,"_y":16},{"_color":"0FFF1F","x":9,"_y":16},{"_color":"0FFF1F","x":10,"_y":16},{"_color":"0FFF1F","x":11,"_y":16},{"_color":"0FFF1F","x":12,"_y":16},{"_color":"0FFF1F","x":13,"_y":16},null,null,{"_color":"0FFF1F","x":16,"_y":16},null,{"_color":"0FFF1F","x":18,"_y":16},{"_color":"0FFF1F","x":19,"_y":16},{"_color":"0FFF1F","x":20,"_y":16},null,{"_color":"0FFF1F","x":22,"_y":16},{"_color":"0FFF1F","x":23,"_y":16},null,null,{"_color":"0FFF1F","x":26,"_y":16},{"_color":"0FFF1F","x":27,"_y":16},null,{"_color":"0FFF1F","x":29,"_y":16},{"_color":"0FFF1F","x":0,"_y":17},null,{"_color":"0FFF1F","x":2,"_y":17},{"_color":"0FFF1F","x":3,"_y":17},{"_color":"0FFF1F","x":4,"_y":17},null,null,null,{"_color":"0FFF1F","x":8,"_y":17},{"_color":"0FFF1F","x":9,"_y":17},{"_color":"0FFF1F","x":10,"_y":17},null,null,{"_color":"0FFF1F","x":13,"_y":17},{"_color":"0FFF1F","x":14,"_y":17},null,null,null,null,{"_color":"0FFF1F","x":19,"_y":17},null,null,null,{"_color":"0FFF1F","x":23,"_y":17},{"_color":"0FFF1F","x":24,"_y":17},{"_color":"0FFF1F","x":25,"_y":17},{"_color":"0FFF1F","x":26,"_y":17},null,null,{"_color":"0FFF1F","x":29,"_y":17},{"_color":"0FFF1F","x":0,"_y":18},null,null,{"_color":"0FFF1F","x":3,"_y":18},{"_color":"0FFF1F","x":4,"_y":18},{"_color":"0FFF1F","x":5,"_y":18},{"_color":"0FFF1F","x":6,"_y":18},null,null,{"_color":"0FFF1F","x":9,"_y":18},null,null,{"_color":"0FFF1F","x":12,"_y":18},{"_color":"0FFF1F","x":13,"_y":18},null,null,{"_color":"0FFF1F","x":16,"_y":18},{"_color":"0FFF1F","x":17,"_y":18},{"_color":"0FFF1F","x":18,"_y":18},{"_color":"0FFF1F","x":19,"_y":18},{"_color":"0FFF1F","x":20,"_y":18},{"_color":"0FFF1F","x":21,"_y":18},null,{"_color":"0FFF1F","x":23,"_y":18},{"_color":"0FFF1F","x":24,"_y":18},{"_color":"0FFF1F","x":25,"_y":18},null,null,{"_color":"0FFF1F","x":28,"_y":18},{"_color":"0FFF1F","x":29,"_y":18},{"_color":"0FFF1F","x":0,"_y":19},{"_color":"0FFF1F","x":1,"_y":19},null,null,{"_color":"0FFF1F","x":4,"_y":19},null,{"_color":"0FFF1F","x":6,"_y":19},{"_color":"0FFF1F","x":7,"_y":19},null,null,null,{"_color":"0FFF1F","x":11,"_y":19},{"_color":"0FFF1F","x":12,"_y":19},{"_color":"0FFF1F","x":13,"_y":19},{"_color":"0FFF1F","x":14,"_y":19},{"_color":"0FFF1F","x":15,"_y":19},{"_color":"0FFF1F","x":16,"_y":19},{"_color":"0FFF1F","x":17,"_y":19},null,null,null,{"_color":"0FFF1F","x":21,"_y":19},{"_color":"0FFF1F","x":22,"_y":19},{"_color":"0FFF1F","x":23,"_y":19},null,null,null,{"_color":"0FFF1F","x":27,"_y":19},{"_color":"0FFF1F","x":28,"_y":19},{"_color":"0FFF1F","x":29,"_y":19},{"_color":"0FFF1F","x":0,"_y":20},{"_color":"0FFF1F","x":1,"_y":20},{"_color":"0FFF1F","x":2,"_y":20},null,null,null,{"_color":"0FFF1F","x":6,"_y":20},{"_color":"0FFF1F","x":7,"_y":20},{"_color":"0FFF1F","x":8,"_y":20},{"_color":"0FFF1F","x":9,"_y":20},{"_color":"0FFF1F","x":10,"_y":20},{"_color":"0FFF1F","x":11,"_y":20},{"_color":"0FFF1F","x":12,"_y":20},null,null,null,{"_color":"0FFF1F","x":16,"_y":20},{"_color":"0FFF1F","x":17,"_y":20},{"_color":"0FFF1F","x":18,"_y":20},null,{"_color":"0FFF1F","x":20,"_y":20},{"_color":"0FFF1F","x":21,"_y":20},{"_color":"0FFF1F","x":22,"_y":20},{"_color":"0FFF1F","x":23,"_y":20},{"_color":"0FFF1F","x":24,"_y":20},null,{"_color":"0FFF1F","x":26,"_y":20},{"_color":"0FFF1F","x":27,"_y":20},{"_color":"0FFF1F","x":28,"_y":20},{"_color":"0FFF1F","x":29,"_y":20},{"_color":"0FFF1F","x":0,"_y":21},{"_color":"0FFF1F","x":1,"_y":21},null,null,{"_color":"0FFF1F","x":4,"_y":21},null,null,{"_color":"0FFF1F","x":7,"_y":21},{"_color":"0FFF1F","x":8,"_y":21},{"_color":"0FFF1F","x":9,"_y":21},null,null,{"_color":"0FFF1F","x":12,"_y":21},{"_color":"0FFF1F","x":13,"_y":21},null,{"_color":"0FFF1F","x":15,"_y":21},{"_color":"0FFF1F","x":16,"_y":21},{"_color":"0FFF1F","x":17,"_y":21},null,null,null,{"_color":"0FFF1F","x":21,"_y":21},{"_color":"0FFF1F","x":22,"_y":21},{"_color":"0FFF1F","x":23,"_y":21},null,null,null,{"_color":"0FFF1F","x":27,"_y":21},{"_color":"0FFF1F","x":28,"_y":21},{"_color":"0FFF1F","x":29,"_y":21},{"_color":"0FFF1F","x":0,"_y":22},null,null,{"_color":"0FFF1F","x":3,"_y":22},{"_color":"0FFF1F","x":4,"_y":22},{"_color":"0FFF1F","x":5,"_y":22},null,null,{"_color":"0FFF1F","x":8,"_y":22},null,null,{"_color":"0FFF1F","x":11,"_y":22},{"_color":"0FFF1F","x":12,"_y":22},{"_color":"0FFF1F","x":13,"_y":22},null,null,{"_color":"0FFF1F","x":16,"_y":22},null,null,{"_color":"0FFF1F","x":19,"_y":22},null,null,{"_color":"0FFF1F","x":22,"_y":22},null,null,{"_color":"0FFF1F","x":25,"_y":22},null,null,{"_color":"0FFF1F","x":28,"_y":22},{"_color":"0FFF1F","x":29,"_y":22},null,null,{"_color":"0FFF1F","x":2,"_y":23},{"_color":"0FFF1F","x":3,"_y":23},{"_color":"0FFF1F","x":4,"_y":23},{"_color":"0FFF1F","x":5,"_y":23},{"_color":"0FFF1F","x":6,"_y":23},null,null,null,{"_color":"0FFF1F","x":10,"_y":23},{"_color":"0FFF1F","x":11,"_y":23},{"_color":"0FFF1F","x":12,"_y":23},{"_color":"0FFF1F","x":13,"_y":23},{"_color":"0FFF1F","x":14,"_y":23},null,null,null,{"_color":"0FFF1F","x":18,"_y":23},{"_color":"0FFF1F","x":19,"_y":23},{"_color":"0FFF1F","x":20,"_y":23},null,null,null,{"_color":"0FFF1F","x":24,"_y":23},{"_color":"0FFF1F","x":25,"_y":23},{"_color":"0FFF1F","x":26,"_y":23},null,null,null,{"_color":"0FFF1F","x":0,"_y":24},null,{"_color":"0FFF1F","x":2,"_y":24},{"_color":"0FFF1F","x":3,"_y":24},{"_color":"0FFF1F","x":4,"_y":24},{"_color":"0FFF1F","x":5,"_y":24},{"_color":"0FFF1F","x":6,"_y":24},{"_color":"0FFF1F","x":7,"_y":24},{"_color":"0FFF1F","x":8,"_y":24},{"_color":"0FFF1F","x":9,"_y":24},{"_color":"0FFF1F","x":10,"_y":24},{"_color":"0FFF1F","x":11,"_y":24},{"_color":"0FFF1F","x":12,"_y":24},{"_color":"0FFF1F","x":13,"_y":24},{"_color":"0FFF1F","x":14,"_y":24},{"_color":"0FFF1F","x":15,"_y":24},{"_color":"0FFF1F","x":16,"_y":24},{"_color":"0FFF1F","x":17,"_y":24},{"_color":"0FFF1F","x":18,"_y":24},{"_color":"0FFF1F","x":19,"_y":24},{"_color":"0FFF1F","x":20,"_y":24},{"_color":"0FFF1F","x":21,"_y":24},{"_color":"0FFF1F","x":22,"_y":24},{"_color":"0FFF1F","x":23,"_y":24},{"_color":"0FFF1F","x":24,"_y":24},{"_color":"0FFF1F","x":25,"_y":24},{"_color":"0FFF1F","x":26,"_y":24},{"_color":"0FFF1F","x":27,"_y":24},null,{"_color":"0FFF1F","x":29,"_y":24}]');
Ga(this);this.ya={};this.ya.Ua=E.b.Ua;this.ya.wb=E.b.wb;this.ya.Ua=E.b.Bb;this.ya.v=m.v;this.ya.L=m.c.L;E.b.Ua=!0;E.b.wb=!0;E.b.Bb=!1;m.v=10;m.c.L=m.ab;m.Ad();this.Qc=!0};X.Ab=function(){if(this.ya)E.b.Ua=this.ya.Ua,E.b.wb=this.ya.wb,E.b.Bb=this.ya.Ua,m.v=this.ya.v,m.c.L=this.ya.L,m.Ad()};N.qa("/images/levels/level-1-art.jpg");N.aa='<a tabindex="-1" target="_blank" href="http://nuclearsyndrom.deviantart.com/"><em>Nuclear Winter</em></a>. Kindly reproduced courtesy of NuclearSyndrom.';O.qa("/images/levels/level-2-art.jpg");
O.aa='<a tabindex="-1" target="_blank" href="http://www.slv.vic.gov.au/pictoria/b/2/8/doc/b28555.shtml"><em>Canvas Town, between Princess Bridge and South Melbourne in 1850\'s</em></a>. De Gruchy & Leigh, 1850-1860.';P.qa("/images/levels/level-3-art.jpg");P.aa='<a tabindex="-1" target="_blank" href="http://www.mynameisyakub.com"><em>The Apocalypse</em></a>. Kindly reproduced courtesy of Yakub.';Q.qa("/images/levels/level-4-art.jpg");Q.aa='<a tabindex="-1" target="_blank" href="http://en.wikipedia.org/wiki/File:Brueghel-tower-of-babel.jpg"><em>The Tower of Babel</em></a>. Pieter Bruegel the Elder, 1563.';
R.qa("/images/levels/level-5-art.jpg");R.aa='<a tabindex="-1" target="_blank" href="http://http://en.wikipedia.org/wiki/File:Dore_London.jpg"><em>Over London\u2013by Rail from London: A Pilgrimage</em></a>. Gustave Dor\u00e9, 1870.';S.qa("/images/levels/level-6-art.jpg");S.aa='<a tabindex="-1" target="_blank" href="http://entertainment.howstuffworks.com/arts/artwork/claude-monet-paintings-1900-19082.htm"><em>Waterloo Bridge</em></a>. Claude Monet, 1900.';T.qa("/images/levels/level-7-art.jpg");
T.aa='<a tabindex="-1" target="_blank" href="http://en.wikipedia.org/wiki/File:Ballarat_1853-54_von_guerard.jpg"><em>Ballarat 1853-54</em></a>. Eugene von Guerard, 1884.';U.qa("/images/levels/level-8-art.jpg");U.aa='<a tabindex="-1" target="_blank" href="http://en.wikipedia.org/wiki/File:Gustave_Caillebotte_-_Jour_de_pluie_%C3%A0_Paris.jpg"><em>A Rainy Day in Paris</em></a>. Gustave Caillebotte, 1877.';V.qa("/images/levels/level-9-art.jpg");V.aa='<a tabindex="-1" target="_blank" href="http://en.wikipedia.org/wiki/File:Renoir16.jpg"><em>Children on the Beach of Guernesey</em></a>. Pierre-Auguste Renoir, 1883.';
W.qa("/images/levels/level-10-art.jpg");W.aa='<a tabindex="-1" target="_blank" href="http://nuclearsyndrom.deviantart.com/"><em>Nuclear Summer</em></a>. Kindly reproduced courtesy of NuclearSyndrom.';X.qa("/images/levels/level-11-art.jpg");X.aa='<a tabindex="-1" target="_blank" href="http://nuclearsyndrom.deviantart.com/"><em>Mad Tea Party</em></a>. Sir John Tenniel, 1865.';var kb={fa:"mars_infrared",S:new google.g.F(-80.73270997231712,85.09268911182834),zoom:3,ra:0};N.z=kb;
var lb={fa:google.g.X.Ba,S:new google.g.F(37.390296,-5.954579),zoom:18,ra:45};O.z=lb;var mb={fa:google.g.X.Ba,S:new google.g.F(45.433607,12.338124),zoom:18,ra:45};P.z=mb;var nb={fa:google.g.X.Ba,S:new google.g.F(41.890384354793554,12.49228627979709),zoom:19,ra:45};Q.z=nb;var ob={fa:google.g.X.Ba,S:new google.g.F(-33.434969,-70.655254),zoom:18,ra:45};R.z=ob;var pb={fa:google.g.X.Ba,S:new google.g.F(47.487229,19.07513),zoom:18,ra:45};S.z=pb;
var qb={fa:google.g.X.Ba,S:new google.g.F(30.006533,-90.158792),zoom:18,ra:45};T.z=qb;var rb={fa:google.g.X.Ba,S:new google.g.F(33.441393,-112.077407),zoom:18,ra:45};U.z=rb;var sb={fa:google.g.X.Ba,S:new google.g.F(21.283355,-157.837787),zoom:18,ra:45};V.z=sb;var tb={fa:google.g.X.Ba,S:new google.g.F(30.265452,-97.744524),zoom:18,ra:45};W.z=tb;var ub={fa:google.g.X.Ba,S:new google.g.F(51,73),zoom:2};X.z=ub;
